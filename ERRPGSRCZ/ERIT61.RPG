     H        1   Y
      *****************************************************************
/*STD *  RPGBASE                                                      *
/*EXI *  TEXT('Midas ER Branch Code Processing')                      *
      *****************************************************************
      *                                                               *
      *  Midas - European Reporting Module - Italy                    *
      *                                                               *
      *  ERIT61 - Branch Code Processing                              *
      *                                                               *
      *  Called By: RPG/ERIT60                                        *
      *                                                               *
      *  (C) Copyright Midas-Kapiti International Ltd. 1997.          *
      *                                                               *
      *  Last Amend No. LUC139             Date 04Jan21               *
      *  Prev Amend No. MMI033             Date 31Mar99               *
      *                 UIT021             Date 29Jan97               *
      *                                                               *
      *---------------------------------------------------------------*
      *                                                               *
      *  LUC139 - Upgrade UCI Italian Returns                         *
      *  MMI033 - Midas Italy Puma/2 Extract Change 3                 *
      *  UIT021 - Bank of Italy Monthly Reporting                     *
      *                                                               *
      *****************************************************************
      *
     FSDBRT1PDIF  E           K        DISK
     F* PA - Italy Reporting - Branch extension details
      *
      *===============================================================*
     E** ARRAY FOR COPYRIGHT
     E                    CPY@    1   1 80
      *===============================================================*
     I*
     I** LOCAL DATA AREA FOR DATABASE ERROR DETAILS
     I*
     ILDA        UDS                            256
     I                                      134 141 DBFILE
     I                                      142 170 DBKEY
     I                                      171 180 DBPGM
     I                                      181 183 DBASE
     I**
     I*  DATA STRUCTURE FOR COMPILATION  - COPYRIGHT INSERTION
     I**
     ICPYR@#      DS
     I                                        1  80 CPY@
     I                                        1  20 CPY@##
      * Program status data structure
     I           SDS
     I                                     *PROGRAM PGM
      **=================================================================
      *
      **  Access Branch extension file   :
     C           EXBRCD    CHAINSDBRT1PD             80
      **   If record not found:
     C           *IN80     IFEQ '1'                        - B1
     C           *LOCK     IN   LDA
     C                     MOVEL'611'     DBASE            *****************
     C                     MOVEL'SDBRT1PD'DBFILE           ** DB ERROR 01 **
     C                     MOVELEXBRCD    DBKEY            *****************
     C                     EXSR #DBERR
     C                     ELSE                            - X1
     C                     Z-ADDPAORSP    ICORSP
     C                     MOVELPAINCL    RTINCL                          MMI033
     C                     Z-ADDPAONSP    ICONSP
     C                     Z-ADDPAORPR    ICORPR
     C                     Z-ADDPAORPA    ICORPA
     C                     END                             - E1
      *
     C                     RETRN
     C**=================================================================
      **
      **  *INZSR      Program initialisation sub-routine
      **
     C           *INZSR    BEGSR
      *
     C           *NAMVAR   DEFN           LDA
     C                     UNLCKLDA
      *
      **
     C           *ENTRY    PLIST
      *  Input Parameters
     C                     PARM           EXBRCD  3        Branch code
      *  Output Parameters
     C                     PARM           ICORSP  50       Origin - Sportello
     C                     PARM           RTINCL  1        Include DATES  MMI033
     C                     PARM           ICONSP  90       Official Nr
     C                     PARM           ICORPR  50       Origin - Provincia
     C                     PARM           ICORPA  30       Origin - Paese
     C                     PARM           ERROR   1
      *
     C                     MOVE '0'       *INU7
      *
     C                     ENDSR
     C*================================================================
      **
      **  #DBERR      Program-detected exception OR monitored error
      **              sub-routine.
      **
     C*================================================================
     C           #DBERR    BEGSR
     C*
      **
     C                     MOVELPGM       DBPGM
     C                     OUT  LDA
     C                     MOVE 'Y'       ERROR
     C                     MOVE '1'       *INU7
     C                     MOVE '1'       *INLR
     C                     DUMP
     C                     RETRN
     C**
     C                     ENDSR
     C********************************************************************
**  CPY@
(C) Copyright Midas-Kapiti International Ltd. 1997.
