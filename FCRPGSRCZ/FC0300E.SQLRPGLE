     H DATEDIT(*YMD)
      *****************************************************************
/**** *  RPGBASE                                                      *                     MD055265
/*STD *  RPGSQLBND                                                    *                     MD055265
/*EXI *  TEXT('Midas FC Display report description')
     H/TITLE Display Report Descriptn  Display record(1 screen)
     F* CRTRPGPGM
      *
     H* SYNOPSIS :
     H* - Display DBF file records, one at a time.
     H* Generated by  : Synon/2  Version:  8646
     H* Function type : Display record(1 screen)  Version:   0.1
      *
     H* Company    : Report Control Facility Model
     H* System     : Report Control Facility Model
     H* User name  : F6875SY
     H* Date       : 05/04/90 time: 10:07:45
      *  (c) Finastra International Limited 2001                      *
     H*
      *================================================================
     F* Maintenance   :
      *================================================================
     F*****************************************************************
     F*                                                               *
      *  Last Amend No. MD055265           Date 10Feb20               *
      *  Prev Amend No. MD046248           Date 27Oct17               *
      * Bank Fusion Midas 1.4 Base -----------------------------------*
      * Midas Plus 1.4 Base 04 ---------------------------------------*
      * Midas Plus 1.4 Base ------------------------------------------*
      * Midas Plus 1.3 ----------- Base ------------------------------*
      *                 CSD027             Date 09Dec05               *
      * Midas Release 4 --------------- Base -------------------------*
      * Midas DBA 3.00 ---------------- Base -------------------------*
      *                 S01486             Date 02Jun94               *
     F*                 S01407             Date  26JAN93              *
     F*                     LN1190       DATE  29APR91                *
     F*                     LN1233       DATE. 18APR91                *
     F*                     LN0678       DATE. 07SEP90                *
     F*                     LN0587       DATE. 01AUG90                *
     F*                                                               *
     F*****************************************************************
     F*                                                               *
      *  MD055265 - Deliverable Data Split for Report Control Facility*
      *  MD046248 - Finastra Rebranding                               *
      *  CSD027 - Conversion Of Customer Number to Alpha              *
     F*  S01486 - ACCOUNT OFFICER AND DEPARTMENT LEVELS ADDED         *
     F*      S01407 - SWITCHABILITY ENHANCEMENTS                      *
     F*      LN1190 - REMOVE 'USR' MESSAGES AND REPLACE WITH 'RCF'    *
     F*               MESSAGES.                                       *
     F*      LN1233 - REPORTING LEVELS SHOULD NOT BE DISPLAYED IN A   *
     F*               SINGLE BRANCH ENVIRONMENT                       *
     F*      LN0678 - STANDARDISE SCREEN APPEARANCE - PROGRAM         *
     F*               RECOMPILED                                      *
     F*      LN0587 - COLLATION FLAG MOVED FROM REPT TO RSFX          *
     F*                                                               *
     F*****************************************************************
     F*display report descriptonInitialise Program F-Spec
     F/COPY WNCPYSRC,FC0300EFPG
     FFC0300E#  CF   E             WORKSTN
     F                                     INFDS(INFDS#)
      * DSP: Display Report Descriptn  Display record(1 screen)
      *
     F***********FCREPTL1IF  E           K        DISK                    S01407
     F*FCREPTJ0  IF   E           K DISK                                         S01407     MD055265
     F**********                           INFDS(INFDS1)                                    MD055265
      * RTV: Report Descriptions       Retrieval index
      *
     D CPY@            S             80    DIM(1) CTDATA PERRCD(1)
     D ARGV            S             78    DIM(3) CTDATA PERRCD(1)
      *
     D*display report descriptonInitialise Program E-Spec
     D/COPY WNCPYSRC,FC0300EEPG
     D @CN             S             25    DIM(2) CTDATA PERRCD(1)              Long constants.
     D*display report descriptonInitialise Program I-Spec
     D/COPY WNCPYSRC,FC0300EIPG
      /EJECT
      * Data structures:-
     D PGMDS         ESDS                  EXTNAME(Y2PGDSP)
      * Program data structure.
     D JBDTTM          DS
      * Job date/time.
     D  ##JDT                  1      6  0
     D  ##JYY                  1      2  0
     D  ##JMM                  3      4  0
     D  ##JDD                  5      6  0
     D  ##JTM                  7     12  0
     D  ##JHH                  7      8  0
     D  ##JNN                  9     10  0
     D  ##JSS                 11     12  0
     D INFDS#        E DS                  EXTNAME(Y2I#DSP)
      * Display file data structure.
      *
     D INFDS1        E DS                  EXTNAME(Y2I1DSP)
      * File information data structure.
      *
     D FCREPT        E DS                  EXTNAME(FCREPJW1)                                MD055265
     D NullInds        s              5i 0 dim(19)                                          MD055265
      * Outward parameters.
     D PARC            DS            25
      * KEY: Report Components         Retrieval index
      * I:RST Report name
     D  PARNAM                 1     10
      *
      * Outward parameters.
     D PBRC            DS            20
      * KEY: Report Suffix             Retrieval index
      * I:    Report name
     D  PBRNAM                 1     10
      *
     D RUNDAT          DS
     D  RUNA                   1      7
     D  RUND                   8     10P 0
     D  SSF                   11     11
     D  DATF                  12     12
     D  MBIN                  13     13
      /EJECT
      * Parameter declarations.
     D P1PARM          DS            10
      * KEY: Report Descriptions       Retrieval index
      * I:RST Report name
     D  P1RNAM                 1     10
     D P2PARM          DS
      * B:    Action Code
     D  P2JTST                 1      1
      /EJECT
      *****************************************************************
     C     *ENTRY        PLIST                                                  Entry parameter
     C                   PARM                    P0RTN             7            Return code
     C                   PARM                    P1PARM                         KEY: Report Des
     C     P2JTST        PARM      P2JTST        WP0001            1            Action Code
      *****************************************************************
      * Initialise
     C                   EXSR      ZZINIT
      *
      * Display and process key screen.
     C                   EXSR      BADSKY
      * Terminate program.
     C                   EXSR      ZXEXPG
      *****************************************************************
      /EJECT
     CSR   BADSKY        BEGSR
      *================================================================
      * Display and process key screen.
      *================================================================
      * Initialise key screen
     C                   EXSR      MDIZ#K
      * Bypass first display of key screen is possible.
     C                   MOVEL     'Y'           W0BYP             1
      * Signal start of transaction.
     C                   MOVEL     'Y'           W0TRN             1
      *
     C     W0TRN         DOWEQ     'Y'
     C     W0TRN         OREQ      'R'
      * Ensure transaction continues (if reset).
     C                   MOVEL     'Y'           W0TRN             1
      * Initialise detail screen.
     C                   EXSR      MAIZ#1
      * Conduct screen conversation:
     C     W0TRN         DOWEQ     'Y'
      * Is bypass key screen still viable?
     C     W0BYP         IFEQ      'Y'
     C     #1RNAM        IFEQ      *BLANK                                       Report name
      * One or more key field is blank.
     C                   MOVEL     'N'           W0BYP
     C                   END
     C                   END
      * Bypass key screen.
     C     W0BYP         IFNE      'Y'
      * Display key screen.
     C                   EXSR      BBEXFM
     C                   END
      * Cancel key screen bypass.
     C                   MOVEL     'N'           W0BYP
      * Process response to key screen:
      * Cancel & exit program.
     C   03              CAS                     ZXEXPG
      * HOME: Reset screen fields.
     C   05              CAS                     BDHMKY
      * Process key screen input.
     C                   CAS                     BEPRKY
     C                   END
      *
     C                   END
     C                   END
      *================================================================
     CSR   BAEXIT        ENDSR
      /EJECT
     CSR   BBEXFM        BEGSR
      *================================================================
      * Display key screen and process HELP requests
      *================================================================
      * Set screen conditioning indicators.
     C                   EXSR      GADSAK
      * Update screen time.
     C                   TIME                    ##TME                          Screen time.
     C     W0HLP         DOUEQ     'N'
      * Enable PUTOVR.
     C                   SETON                                        86
     C                   WRITE     #MSGCTL
     C                   WRITE     #CMDTXT1
     C                   EXFMT     #RCDKEY
     C                   MOVEL     'N'           W0HLP             1            Reset help requ
      * If help requested, display help text.
     C   25              EXSR      ZHHPKY                                       Display help te
     C                   END
      * Update job time.
     C                   TIME                    ##JTM                          Job time.
      * Clear messages from program message queue.
     C                   CALL      'Y2CLMSC'
     C                   PARM      ##PGM         ZAPGM            10
     C                   PARM      '*SAME'       ZAPGRL            5
      * Reset first message only flag.
     C                   MOVEL     'Y'           ZAFSMS            1      99    *
      *================================================================
     CSR   BBEXIT        ENDSR
      /EJECT
     CSR   BDHMKY        BEGSR
      *================================================================
      * Process HOME key
      *================================================================
     C                   MOVEL     'N'           W0TRN
      *================================================================
     CSR   BDEXIT        ENDSR
      /EJECT
     CSR   BEPRKY        BEGSR
      *================================================================
      * Process key screen.
      *================================================================
      * Validate key fields.
     C                   EXSR      BFVLKY
     C     *IN99         CABEQ     '1'           BEEXIT
      * Check restriction within Report Descriptions.
     C                   EXSR      VACKRL
      * Check for existing record.
     C     KRTV          KLIST
     C                   KFLD                    DXRNAM                         Report name
      * Setup key.
     C                   MOVEL     #1RNAM        DXRNAM                         Report name
     C***********KRTV      CHAIN@DXREIK              9091  *              S01407
     C*****KRTV*         CHAIN     FCREPTD0                           9091      *     S0140 MD055265
     C/EXEC SQL                                                                             MD055265
     C+ SELECT *                                                                            MD055265
     C+ into :FCREPT :NullInds                                                              MD055265
     C+ from FCREPJW1                                                                       MD055265
     C+ where DXRNAM = :#1RNAM                                                              MD055265
     C/END-EXEC                                                                             MD055265
     C                   IF        SQLCODE <> 0                                             MD055265
     C                             AND SQLCODE <> 100                                       MD055265
     C******IN91         IFEQ      '1'                                                      MD055265
      * Record locked.
     C                   SETON                                        99        *
     C                   GOTO      BEEXIT
     C                   END                                                    FI 91
      *
      * If record does not exist then signal error
     C******IN90         IFEQ      '1'                                                      MD055265
     C                   IF        SQLCODE = 100                                            MD055265
     C                   SETON                                        99        *
      * Send message 'Report Descriptions    NF'
     C**********           MOVEL'USR0712' ZAMSID           Message id.    LN1190
     C                   MOVEL     'RCF0712'     ZAMSID                         Message id.    LN119
     C                   EXSR      ZASNMS                                       Send message
     C                   ELSE
     C                   EXSR      MBFL#1
      * CALC: Detail screen function fields
      * 00/Copy member XX0300ESFF - Report Descriptions  *
     C*display report descriptonCalculate Detail Func Fld
     C/COPY WNCPYSRC,FC0300ESFF
      * USER: Load detail screen from DBF record
      * 00/Copy member XX0300ELDS - Report Descriptions  *
     C*display report descriptonLoad Detail Screen
     C/COPY WNCPYSRC,FC0300ELDS
     C                   END
      *
     C   99              GOTO      BEEXIT
      * No errors: Display and process details
     C                   EXSR      CADSDA
      *
      *================================================================
     CSR   BEEXIT        ENDSR
      /EJECT
     CSR   BFVLKY        BEGSR
      *================================================================
      * Validate key fields.
      *================================================================
      * USER: Validate key screen
      * 00/Copy member XX0300EVKS - Report Descriptions  *
     C*display report descriptonValidate Key Screen
     C/COPY WNCPYSRC,FC0300EVKS
      *================================================================
     CSR   BFEXIT        ENDSR
      /EJECT
     CSR   CADSDA        BEGSR
      *================================================================
      * Display and process details.
      *================================================================
      * Conduct detail screen conversation:
      * - repeat until screen control flag is reset:
     C     W0TRN         DOWEQ     'Y'
      * Display detail screen.
     C                   EXSR      CBEXFM
      * Process response to detail screen:
     C   03              CAS                     ZXEXPG
      * HOME: Reset screen fields.
      * Process detail screen input.
      * Redisplay previous screen
     C   12              CAS                     CCDSPV
     C                   CAS                     CFPRSC
     C                   END
      *
     C                   END
      *================================================================
     CSR   CAEXIT        ENDSR
      /EJECT
     CSR   CBEXFM        BEGSR
      *================================================================
      * Display screen and process HELP requests.
      *================================================================
      * Set screen conditioning indicators.
     C                   EXSR      GBDSAD
      * Update screen time.
     C                   TIME                    ##TME                          Screen time.
     C     W0HLP         DOUEQ     'N'
      * Enable PUTOVR.
     C                   SETON                                        86
     C                   WRITE     #MSGCTL
     C                   WRITE     #CMDTXT2
     C                   EXFMT     #RCDDTL1
     C                   MOVEL     'N'           W0HLP             1            Reset help requ
      * If help requested, display help text.
     C   25              EXSR      ZHHPKY                                       Display help te
     C                   END
      * Update job time.
     C                   TIME                    ##JTM                          Job time.
      * Clear messages from program message queue.
     C                   CALL      'Y2CLMSC'
     C                   PARM      ##PGM         ZAPGM            10
     C                   PARM      '*SAME'       ZAPGRL            5
      * Reset first message only flag.
     C                   MOVEL     'Y'           ZAFSMS            1      99    *
      *================================================================
     CSR   CBEXIT        ENDSR
      /EJECT
     CSR   CCDSPV        BEGSR
      *================================================================
      * Redisplay previous screen.
      *================================================================
      * USER: Process key screen request
      * 00/Copy member XX0300EPKR - Report Descriptions  *
     C*display report descriptonProcess Key Screen Rqst
     C/COPY WNCPYSRC,FC0300EPKR
     C                   MOVEL     @CN(01)       P0RTN                          *Return code
     C                   EXSR      ZYEXPG
     C                   MOVEL     'R'           W0TRN
      *================================================================
     CSR   CCEXIT        ENDSR
      /EJECT
     CSR   CFPRSC        BEGSR
      *================================================================
      * Validate record.
      *================================================================
      * Confirm/update is not defered.
     C                   MOVEL     'N'           W0DCF             1
      * Validate details.
     C                   EXSR      DCVLDL
      * Quit if error:
     C   99              GOTO      CFEXIT
      * Defer confirm/update requested:
     C     W0DCF         CABEQ     'Y'           CFEXIT
      * Process record:
     C                   EXSR      EBPR##
      *================================================================
     CSR   CFEXIT        ENDSR
      /EJECT
     CSR   DCVLDL        BEGSR
      *================================================================
      * Validate details.
      *================================================================
      * CALC: Detail screen function fields
      * 00/Copy member XX0300ESFF - Report Descriptions  *
     C*display report descriptonCalculate Detail Func Fld
     C/COPY WNCPYSRC,FC0300ESFF
      * USER: Validate detail screen
      * 00/Copy member XX0300EVDS - Report Descriptions  *
     C*display report descriptonValidate Detail Screen
     C/COPY WNCPYSRC,FC0300EVDS
      *================================================================
     CSR   DCEXIT        ENDSR
      /EJECT
     CSR   EBPR##        BEGSR
      *================================================================
      * Process record.
      *================================================================
      * USER: Perform confirmed action
      * 00/Copy member XX0300EPCA - Report Descriptions  *
     C*display report descriptonPerform Confrimed Action
     C/COPY WNCPYSRC,FC0300EPCA
      * Quit if error signalled.
     C   99              GOTO      EBEXIT
      * USER: Process command keys
      *CASE:     DTL.*CMD key is disp report components
     C     *IN19         IFEQ      '1'                                          *IF
      * Display Report Components - Report Components  *
     C                   MOVEL     *BLANK        PARC
     C                   MOVEL     #1RNAM        PARNAM                         Report name
      *
     C                   CALL      'FC0302D'                            90      Display Report
     C                   PARM      *BLANK        W0RTN             7            Return code
     C                   PARM                    PARC                           KEY: Report Com
     C     P2JTST        PARM      P2JTST        WQ0002            1            Action Code
      *
     C     *IN90         IFEQ      '1'
      * Call to program ended in error.
     C                   MOVEL     'Y2U0021'     W0RTN             7
     C                   END
      *
      * Error detected ?
     C     W0RTN         IFNE      *BLANK
     C                   SETON                                        99        *
     C                   END
     C                   END                                                    *FI
      *CASE:     DTL.*CMD key is disp report suffixes
     C     *IN20         IFEQ      '1'                                          *IF
      * Display Report Suffix - Report Suffix  *
     C                   MOVEL     *BLANK        PBRC
     C                   MOVEL     #1RNAM        PBRNAM                         Report name
      *
     C                   CALL      'FC0301D'                            90      Display Report
     C                   PARM      *BLANK        W0RTN             7            Return code
     C                   PARM                    PBRC                           KEY: Report Suf
     C     P2JTST        PARM      P2JTST        WQ0003            1            Action Code
      *
     C     *IN90         IFEQ      '1'
      * Call to program ended in error.
     C                   MOVEL     'Y2U0021'     W0RTN             7
     C                   END
      *
      * Error detected ?
     C     W0RTN         IFNE      *BLANK
     C                   SETON                                        99        *
     C                   END
     C                   END                                                    *FI
      *CASE:     PGM.*Return code is *User QUIT requested
     C     W0RTN         IFEQ      @CN(02)                                      *IF
     C                   MOVEL     @CN(02)       P0RTN                          *Return code
     C                   EXSR      ZYEXPG
     C                   END                                                    *FI
      * 00/Copy member XX0300EPCK - Report Descriptions  *
     C*display report descriptonProcess Command Keys
     C/COPY WNCPYSRC,FC0300EPCK
      * Quit if error signalled.
     C   99              GOTO      EBEXIT
      * Restart program for next record.
     C                   MOVEL     'N'           W0TRN
      *================================================================
     CSR   EBEXIT        ENDSR
      /EJECT
     CSR   GADSAK        BEGSR
      *================================================================
      * Set key screen conditioning indicators.
      *================================================================
      *================================================================
     CSR   GAEXIT        ENDSR
      /EJECT
     CSR   GBDSAD        BEGSR
      *================================================================
      * Set detail screen conditioning indicators.
      *================================================================
      * Protect key fields on detail screen.
     C                   SETON                                        88        *
     C* Display reporting levels only if system is Multibranched          LN1233
     C                   MOVEL     '0'           *IN79                                         LN123
     C     WUMBIN        IFEQ      'N'                                          *IF            LN123
     C     #1DLVL        ANDNE     'Y'                                                         S0148
     C     #1ALVL        ANDNE     'Y'                                                         S0148
     C                   MOVEL     '1'           *IN79                                         LN123
     C                   END                                                    *FI            LN123
      * Enable key screen.
     C                   SETON                                        87        *
      *================================================================
     CSR   GBEXIT        ENDSR
      /EJECT
     CSR   MAIZ#1        BEGSR
      *================================================================
      * Initialise record - except for key fields.
      *================================================================
     C                   Z-ADD     *ZERO         #1LCD                          Last Change Dat
     C                   MOVEL     *BLANK        #1CHTP                         Type of Last Ch
     C                   MOVEL     *BLANK        #1MIDQ                         Midas/Q
     C                   MOVEL     *BLANK        #1RDSC                         Report Descript
     C                   MOVEL     *BLANK        #1CMOD                         Module
     C                   MOVEL     *BLANK        #1GLVL                         Bank-Level
     C                   MOVEL     *BLANK        #1CLVL                         Company-Level
     C                   MOVEL     *BLANK        #1BLVL                         Branch-level
     C                   MOVEL     *BLANK        #1DLVL                                        S0148
     C                   MOVEL     *BLANK        #1ALVL                                        S0148
     C                   MOVEL     *BLANK        #1IPCY                         Input Cycle
     C                   MOVEL     *BLANK        #1CLBP                         COB
     C                   MOVEL     *BLANK        #1PDFL                         Periodic
     C******************** MOVEL*BLANK    #1COLT           Collation      LN0587
     C                   MOVEL     *BLANK        #1DFTO                         Default Output
      *================================================================
     CSR   MAEXIT        ENDSR
      /EJECT
     CSR   MBFL#1        BEGSR
      *================================================================
      **Move*@DXREIK*fields*to*screen.                                    S01407
      * Move FCREPTD0 fields to screen.                                   S01407
      *================================================================
     C                   Z-ADD     DXLCD         #1LCD                          Last Change Dat
     C                   MOVEL     DXCHTP        #1CHTP                         Type of Last Ch
     C                   MOVEL     DXMIDQ        #1MIDQ                         Midas/Q
     C                   MOVEL     DXRNAM        #1RNAM                         Report name
     C                   MOVEL     DXRDSC        #1RDSC                         Report Descript
     C                   MOVEL     DXCMOD        #1CMOD                         Module
     C                   MOVEL     DXGLVL        #1GLVL                         Bank-Level
     C                   MOVEL     DXCLVL        #1CLVL                         Company-Level
     C                   MOVEL     DXBLVL        #1BLVL                         Branch-level
     C                   MOVEL     DXDLVL        #1DLVL                                        S0148
     C                   MOVEL     DXALVL        #1ALVL                                        S0148
     C                   MOVEL     DXIPCY        #1IPCY                         Input Cycle
     C                   MOVEL     DXCLBP        #1CLBP                         COB
     C                   MOVEL     DXPDFL        #1PDFL                         Periodic
     C******************** MOVELDXCOLT    #1COLT           Collation      LN0587
     C                   MOVEL     DXDFTO        #1DFTO                         Default Output
      *================================================================
     CSR   MBEXIT        ENDSR
      /EJECT
     CSR   MDIZ#K        BEGSR
      *================================================================
      * Initialise key screen.
      *================================================================
     C                   MOVEL     P1RNAM        #1RNAM                         Report name
      * USER: Load key screen
      * 00/Copy member XX0300ELKS - Report Descriptions  *
     C*display report descriptonLoad Key Screen
     C/COPY WNCPYSRC,FC0300ELKS
      *================================================================
     CSR   MDEXIT        ENDSR
      /EJECT
     CSR   VACKRL        BEGSR
      *================================================================
      * Check restriction within Report Descriptions.
      *================================================================
      * Name search required ?
     C                   MOVEL     #1RNAM        WK1X01            1            Report name
     C     WK1X01        IFEQ      '?'                                          Report name
     C                   CALL      'FC0300S'                            90      *
     C                   PARM                    W0RTN             7            Return code
     C     #1RNAM        PARM      #1RNAM        WQ0001           10            Report name
     C     *IN90         IFEQ      '1'
      * Call to program ended in error.
     C                   MOVEL     'Y2U0021'     W0RTN             7
     C                   END
     C                   MOVEL     'Y'           W0DCF             1            Defer confirm
     C                   END
      *================================================================
     CSR   VAEXIT        ENDSR
      /EJECT
     CSR   ZASNMS        BEGSR
      *================================================================
      * Send message to program's message queue.
      *================================================================
      * Send if first error message or not an error message.
     C     ZAMSTP        IFNE      *BLANK
     C     ZAFSMS        ORNE      'N'
     C     ZAMSTP        IFEQ      *BLANK
      * Signal first error message sent.
     C                   MOVEL     'N'           ZAFSMS
     C                   END
     C     ZAPGM         IFEQ      *BLANK
     C                   MOVEL     ##PGM         ZAPGM
     C                   END
      * If no message file specified use default.
     C     ZAMSGF        IFEQ      *BLANK
     C                   MOVEL     ZADFMF        ZAMSGF
     C                   END
     C                   CALL      'Y2SNMGC'
     C                   PARM                    ZAPGM            10            Program queue
     C                   PARM                    ZAPGRL            5            Rel queue
     C                   PARM                    ZAMSID            7            Message Id.
     C                   PARM                    ZAMSGF           10            Message file.
     C                   PARM                    ZAMSDA          132            Message data.
     C                   PARM                    ZAMSTP            7            Message type.
     C                   END
      * Clear all fields for default mechanism next time.
     C                   MOVEL     *BLANK        ZAPGM                          Program queue
     C                   MOVEL     *BLANK        ZAPGRL                         Rel queue
     C                   MOVEL     *BLANK        ZAMSID                         Message Id.
     C                   MOVEL     *BLANK        ZAMSGF                         Message file.
     C                   MOVEL     *BLANK        ZAMSDA                         Message data.
     C                   MOVEL     *BLANK        ZAMSTP                         Message type.
      *================================================================
     CSR   ZAEXIT        ENDSR
      /EJECT
     CSR   ZHHPKY        BEGSR
      *================================================================
      * Display HELP text.
      *================================================================
     C                   MOVEL     'Y'           W0HLP             1            Signal help req
     C                   CALL      'YDDSHPR'
     C                   PARM      ##PGM         W0HPMB           10            Member name.
     C                   PARM      *BLANK        YYHPFL           10            *DFT text file.
     C                   PARM      *BLANK        YYHPLB           10            Help text lib.
     C                   PARM                    W0RTN             7            Return Code.
      *================================================================
     CSR   ZHEXIT        ENDSR
      /EJECT
     CSR   ZXEXPG        BEGSR
      *================================================================
      * Cancel and exit from key screen.
      *================================================================
      * USER: Exit program processing
      * 00/Copy member XX0300EEPP - Report Descriptions  *
     C*display report descriptonExit Program Processing
     C/COPY WNCPYSRC,FC0300EEPP
      *CASE:     KEY.*CMD key is *Exit
     C     *IN03         IFEQ      '1'                                          *IF
     C                   MOVEL     @CN(02)       P0RTN                          *Return code
     C                   EXSR      ZYEXPG
     C                   END                                                    *FI
     C                   MOVEL     *BLANK        P0RTN
     C                   EXSR      ZYEXPG
      *================================================================
     CSR   ZXEXIT        ENDSR
      /EJECT
     CSR   ZYEXPG        BEGSR
      *================================================================
      * Exit program: Direct.
      *================================================================
      * Terminate program.
     C                   SETON                                        LR
      *
      * Exit program.
     C                   RETURN
      *
      *================================================================
     CSR   ZYEXIT        ENDSR
      /EJECT
     CSR   ZZINIT        BEGSR
      *================================================================
      * Initialisation.
      *================================================================
     C                   MOVE      *BLANK        P0RTN
     C                   MOVE      *BLANK        W0RTN             7
      * Setup job date/time.
     C                   Z-ADD     UDATE         ##JDT                          Job date.
     C                   TIME                    ##JTM                          Job time.
     C                   TIME                    ##TME             6 0          Screen time.
      * Obtain default message file.
     C     *DTAARA       DEFINE    FCMGFLA       ZADFMF           10
     C                   IN        ZADFMF
      * Define work field run day number
     C                   Z-ADD     *ZERO         WURUND            5 0
      * Define work field midas rundate
     C                   MOVEL     *BLANK        WURUNA            7
      * Define work field Set Up Complete
     C                   MOVEL     *BLANK        WUSSF             1
      * Define work field date format flag
     C                   MOVEL     *BLANK        WUDATF            1
      * Define work field Multi-branching Indicator
     C                   MOVEL     *BLANK        WUMBIN            1
      * Signal first error message outstanding.
     C                   MOVEL     'Y'           ZAFSMS            1
      * USER: Initialise program
      * Last Amd Hdr Box fc0300e - Report Descriptions  *
      * get rundate - rundate  *
     C     *DTAARA       DEFINE                  RUNDAT
     C                   IN        RUNDAT
     C                   MOVE      RUNA          ##RUNA
     C                   MOVE      RUNA          WURUNA
     C                   MOVE      RUND          WURUND
     C                   MOVE      SSF           WUSSF
     C                   MOVE      DATF          WUDATF
     C                   MOVE      MBIN          WUMBIN
      * Standard RPG Creation PAR - standard functions  *
      *  C R E A T I O N     P A R A M E T E R S
      *
      *
      ********************************************************************
      * Copyright Statement - standard functions  *
     C                   MOVEA     CPY@          BIS@             80
      * set up enquiry footer - Report Descriptions  *
     C                   MOVEA     ARGV(1)       ##AENA
      * 00/Copy member XX0300EFPG - Report Descriptions  *
      * 00/Copy member XX0300EEPG - Report Descriptions  *
      * 00/Copy member XX0300EIPG - Report Descriptions  *
      * 00/Copy member XX0300ECPG - Report Descriptions  *
     C*display report descriptonInitialise Program C-Spec
     C/COPY WNCPYSRC,FC0300ECPG
      * 00/Copy member XX0300EOPG - Report Descriptions  *
      *================================================================
     CSR   ZZEXIT        ENDSR
     O*display report descriptonInitialise Program O-Spec
     O/COPY WNCPYSRC,FC0300EOPG
** CPY@
(c) Finastra International Limited 2001
**
F3=Main Menu   F12=Previous   F19=Report Components   F20=Print Files
** @CN Long constants used in program.
PREVSCN
Y2U9999
