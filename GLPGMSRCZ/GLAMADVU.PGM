000100200603      *****************************************************************
000200200603/*STD *  PGMBASE                                                      *
000300200603/*EXI *  MODULE(GLAMADVU) ACTGRP(*CALLER)                             *
000400200603/*EXI *  TEXT('Midas GL Account maintenance validate and update')     *
000500200603      *****************************************************************
000600200603      *                                                               *
000700200603      *  Midas - General Ledger Module                                *
000800200603      *                                                               *
000900200603      *  GLAMADVU - Transaction validate and update program           *
001000200603      *                                                               *
001100200603      *  Function:  This program validates and updates transactions   *
001200200603      *             received from the front end                       *
001300200603      *                                                               *
001400200603      *  (c) Finastra International Limited 2003                      *
001500200603      *                                                               *
001600200604      *  Last Amend No. 250822             Date 22May20               *
001700200603      *  Prev Amend No. MD054028           Date 05Sep19               *
001800200603      *                 MD041837           Date 16Jun19               *
001900200603      *                 CER050             Date 23Mar16               *
002000200603      *                 CSD101             Date 07Dec18               *
002100200603      *                 CSD102             Date 08Jan19               *
002200200603      *                 MD051247           Date 17Jul18               *
002300200603      *                 MD044880           Date 15Jan18               *
002400200603      *                 MD046248           Date 27Oct17               *
002500200603      *                 MD044546           Date 20Mar17               *
002600200603      *                 MD043890           Date 06Feb17               *
002700200603      *                 MD042713           Date 05Dec16               *
002800200603      *                 222427             Date 05Dec16               *
002900200603      *                 MD040328           Date 16Aug16               *
003000200603      *                 MD040146           Date 11Aug16               *
003100200603      *                 LLN022A            Date 03Jun15               *
003200200603      *                 LLN022             Date 03Jun15               *
003300200603      *                 CRE101             Date 27Aug14               *
003400200603      *                 CGL165             Date 17Feb15               *
003500200603      *                 MD028970           Date 25Nov14               *
003600200603      *                 MD026979           Date 09Jun14               *
003700200603      *                 MD024398           Date 11May14               *
003800200603      *                 AR801992           Date 27Jul12               *
003900200603      *                 AR971184A          Date 22Jun12               *
004000200603      *                 AR971184           Date 28May12               *
004100200603      *                 AR946674           Date 03Apr12               *
004200200603      *                 AR947093           Date 26Apr12               *
004300200603      *                 AR847249           Date 28Jan12               *
004400200603      *                 CSF011A            Date 28Nov11               *
004500200603      *                 CSF011             Date 12Sep11               *
004600200603      *                 AR812501           Date 07Sep11               *
004700200603      *                 AR820577           Date 31Aug11               *
004800200603      *                 CER049             Date 06Dec10               *
004900200603      *                 CRE073             Date 06Dec10               *
005000200603      *                 CER055             Date 06Dec10               *
005100200603      *                 AR802610           Date 15Jul11               *
005200200603      *                 CRE075             Date 06Dec10               *
005300200603      *                 CER059             Date 19Jul10               *
005400200603      *                 262070             Date 26Oct09               *
005500200603      *                 BUG24157           Date 04Jun09               *
005600200603      *                 BUG22742           Date 07Feb09               *
005700200603      *                 CER047             Date 19May08               *
005800200603      *                 BUG22973           Date 27May10               *
005900200603      *                 BUG23484           Date 27May10               *
006000200603      * Bank Fusion Midas 1.4 Base -----------------------------------*
006100200603      *                 CRE015             Date 18Dec09               *
006200200603      *                 CRE030             Date 10Jul06               *
006300200603      * Midas Plus 1.4 Base 04 ---------------------------------------*
006400200603      *                 256564             Date 17Sep08               *
006500200603      *                 BUG17361A          Date 11Apr08               *
006600200603      *                 245029A            Date 12Mar07               *
006700200603      *                 249966             Date 30Aug07               *
006800200603      *                 249660             Date 14Aug07               *
006900200603      *                 BUG13639           Date 27Mar07               *
007000200603      *                 245648             Date 15Feb07               *
007100200603      *                 243436             Date 22Dec06               *
007200200603      *                 243129             Date 27Oct06               *
007300200603      *                 BUG130120A         Date 24Jan07               *
007400200603      *                 BUG130120          Date 24Jan07               *
007500200603      * Midas Plus 1.3 ----------- Base ------------------------------*
007600200603      *                 242488             Date 27Sep06               *
007700200603      *                 240916             Date 12Sep06               *
007800200603      *                 BUG11670           Date 30Jun06               *
007900200603      *                 240037A (Reopen)   Date 15Jun06               *
008000200603      *                 240037R (Reopen)   Date 14Jun06               *
008100200603      *                 240205             Date 06Jun06               *
008200200603      *                 239316             Date 01Jun06               *
008300200603      *                 240366             Date 19Jun06               *
008400200603      *                 237646             Date 13Jun06               *
008500200603      *                 240312             Date 06Jun06               *
008600200603      *                 237341             Date 29Apr06               *
008700200603      *                 238839 (Reopen)    Date 12Apr06               *
008800200603      *                 238625             Date 06Apr06               *
008900200603      *                 238839             Date 29Mar06               *
009000200603      *                 CSD031             Date 10Apr06               *
009100200603      *                 237401             Date 10Feb06               *
009200200603      *                 CSD027             Date 09Dec05               *
009300200603      *                 BUG10280           Date 02Feb06               *
009400200603      *                 CER001             Date 25Apr05               *
009500200603      *                 CAP086             Date 08Jun05               *
009600200603      *                 BUG9141            Date 02Dec05               *
009700200603      *                 BUG8210            Date 02Sep05               *
009800200603      *                 BUG8104            Date 19Aug05               *
009900200603      *                 CSW037A            Date 02May05               *
010000200603      *                 BUG4615            Date 26Oct04               *
010100200603      *                 CSD025             Date 11Jan05               *
010200200603      *                 CSW037             Date 15Dec04               *
010300200603      *                 CSW036             Date 15Dec04               *
010400200603      *                 BUG4686            Date 05Nov04               *
010500200603      *                 BUG4400            Date 30Sep04               *
010600200603      *                 CRE010             Date 10Sep04               *
010700200603      *                 BUG4252            Date 17Sep04               *
010800200603      *                 BUG4196            Date 09Sep04               *
010900200603      *                 BUG3068            Date 07Jun04               *
011000200603      *                 CLE025             Date 20Oct03               *
011100200603      *                 BUG2733            Date 17May04               *
011200200603      *                 BG2557             Date 13May04               *
011300200603      *                 BG2651             Date 12May04               *
011400200603      *                 TDA084             Date 10Apr04               *
011500200603      *                 BUG553             Date 14Apr04               *
011600200603      *                 CSC022             Date 24Feb04               *
011700200603      *                 CAP084  *CREATE    Date 17Jul03               *
011800200603      *                                                               *
011900200603      *---------------------------------------------------------------*
012000200603      *                                                               *
012100200603      *  250822 - Recompiled over changes in GLAMADVU.                *
012200200603      *  MD054028 - Encountered issues in MQ Testing due to XML not   *
012300200603      *             being updated (Recompile)                         *
012400200603      *  MD041837 - Tax indicator is not defaulted anymore with       *
012500200603      *             CER050.                                           *
012600200603      *  CER050 - Annualised Percentage Rate  (Recompile)             *
012700200603      *  CSD101 - Password Encryption (Recompile)                     *
012800200603      *  CSD102 - Password Length Extension (Recompile)               *
012900200603      *  MD051247 - SP15_CUSD API issue (Recompile)                   *
013000200603      *  MD044880 - BOE Switched On Testing and Fixing (Recompile)    *
013100200603      *  MD046248 - Finastra Rebranding                               *
013200200603      *  MD044546 - Enable the ABC flag when CAP205 is on. (Recompile)*
013300200603      *  MD043890 - Cannot insert term and notice (Recompile)         *
013400200603      *  MD042713 - Display Default Statement commission. (Recompile) *
013500200603      *  222427 - AMAN - 'Extra Daily Statement Commission' default   *
013600200603      *           value is 0.00.  Data structure which includes       *
013700200603      *           DDSTFQ should be included in the parameter list on  *
013800200603      *           call to module GLAMAD4DT.                           *
013900200603      *           Partially Applied for MD042713. (Recompile)         *
014000200603      *  MD040328 - Unable to update Include Account Balance check    *
014100200603      *             field via SOAP in AMAD (Recompile)                *
014200200603      *  MD040146 - Account maintenance - Account name different from *
014300200603      *             Customer report name (Recompile)                  *
014400200603      *  LLN022A - BOE Upgrade to MidasPlus (Recompile)               *
014500200603      *  LLN022  - BOE Upgrade to MidasPlus (Recompile)               *
014600200603      *  CRE101 - Interim Interest Statement on a Frequency           *
014700200603      *           (Recompile)                                         *
014800200603      *  CGL165 - Dual Withholding Tax (Recompile)                    *
014900200603      *  MD028970 - Added checking for feature CRE010 when processing *
015000200603      *             Account Balance Check (Recompile).                *
015100200603      *  MD026979 - Added field for Retail account and IBAN           *
015200200603      *             validation against WIP entries (Recompile)        *
015300200603      *  MD024398 - API Performance Optimisation (Recompile)          *
015400200603      *  AR801992 - Recompile due to change in GLAMADVU.              *
015500200603      *             (Child: AR801993)                                 *
015600200603      *  AR971184A- During Amend Front Ofc Id must be updated with the*
015700200603      *             new one (Recompile)                               *
015800200603      *  AR971184 - For some JMS APIs (CUSD, AMAD, DPMV, OPAY), Front *
015900200603      *             Office Id is no more updated in master database   *
016000200603      *             files which provokes some big problems in third   *
016100200603      *             party product such as TOF.(Child:AR971185)        *
016200200603      *             (Recompile)                                       *
016300200603      *  AR946674 - Serious midas error has occured                   *
016400200603      *             (Child: AR946675) (Recompile)                     *
016500200603      *  AR947093 - Base Rate amendment resulted to 0 interest rate   *
016600200603                    (Recompile)                                       *
016700200603      *  AR847249 - Negative interest is shown in the main list and   *
016800200603      *             Loan Details enquiry screen (Recompile)           *
016900200603      *  CSF011A - CCR015: Display Order in Confirmation Pages        *
017000200603      *            (Recompile)                                        *
017100200603      *  CSF011 - Customer Name on Inputs (Recompile)                 *
017200200603      *  AR812501 - Acct name is mandatory in MQ/SOAP testing of AMAD *
017300200603      *             (Recompile)                                       *
017400200603      *  AR820577 - Previous Overdraft fields not displayed in        *
017500200603      *             Confirmation pages for Close action (Recompile)   *
017600200603      *  CER049 - Stamp Tax (Recompile)                               *
017700200603      *  CRE073 - Interest Rate Rounding (Recompile)                  *
017800200603      *  CER055 - Penalty Interest on Exceeding Overdraft Limit       *
017900200603      *           (Recompile)                                         *
018000200603      *  AR802610 - Add Interest Scale flag in API definition.        *
018100200603      *             (Recompile)                                       *
018200200603      *  CRE075 - Effective Date for Retail Accounts (Recompile)      *
018300200603      *  CER059 - German Feature Upgrade to Delhi                     *
018400200603      *  262070 - Problem with flag for par24C in Account details.    *
018500200603      *           Recompile due to changes in GLAMADVU Module.        *
018600200603      *  BUG24157 - AMAD KWG field does not default to CUAP KWG       *
018700200603      *           field when field is set to Y (Recompile)            *
018800200603      *  BUG22742 - Rectify the invalid defaulting when customer is   *
018900200603      *             flagged as Taxable (Recompile)                    *
019000200603      *  CER047 - German Features LF037-00 Reporting §24c KWG         *
019100200603      *           (Recompile)                                         *
019200200603      *  BUG22973 - No TimeStamp in Transaction Confirmation during   *
019300200603      *             Completion and Authorisation (Recompile)          *
019400200603      *  BUG23484 - Amend and AutoAuthorise existing record via SOAP  *
019500200603      *             fails, gets error message MMM1067 (Recompile)     *
019600200603      *  CRE015 - Retail Term and Notice Accounts (Recompile)         *
019700200603      *  CRE030 - Default RE Accounts by Currency (Recompile)         *
019800200603      *  256564 - Recompile due to PF changes done by fix 256330      *
019900200603      *  BUG17361A- Incorrect IBAN number written on account          *
020000200603      *             maintenance(Recompile)                            *
020100200603      *  245029A - Recompiled due to change in GLAMADVU module.       *
020200200603      *  249966 - Recompiled due to changes in MOD/GLAMADVU           *
020300200603      *  249660 - Recompiled due to changes in MOD/GLAMADVU           *
020400200603      *  BUG13639 - Serious midas error in AMAD (Recompile)           *
020500200603      *  245648 - Recompiled due to change in GLAMADVU module.        *
020600200603      *  243436 - Recompile due to change in GLAMADVU                 *
020700200603      *  243129 - Recompiled over changes in GLAMADVU.                *
020800200603      *  BUG13120A - Reverse Fix for BUG13120                         *
020900200603      *  BUG13120 - Missing Field - Passbook used on savings account  *
021000200603      *  242488  - Recompiled due to change in GLAMADVU module.       *
021100200603      *  240916  - Allowed execution of subroutine DFT@O when DDACTN  *
021200200603      *            is equal to 'I'.  Recompile due to change in       *
021300200603      *            module/GLAMADVU.                                   *
021400200603      *  BUG11670 - System should not default the transaction customer*
021500200603      *           on the facility details tab (Recompile)             *
021600200603      *  240037A (Reopen) - Serious Midas error - incomplete facility *
021700200603      *                     customer during input of accounts         *
021800200603      *                     (Recompile)                               *
021900200603      *  240037R (Reopen) - Serious Midas error - incomplete facility *
022000200603      *                     customer during input of accounts         *
022100200603      *                     (Recompile)                               *
022200200603      *  240205 - Recompiled due to change in GLAMADVU module         *
022300200603      *  239316 - Applied core fix TMPFX01.                           *
022400200603      *  240366 - Recompiled due to change in MOD/GLAMADVU.           *
022500200603      *  237646 - Recompiled due to change in GLAMADVU.               *
022600200603      *  240312 - WPROCDATE is not initialised properly               *
022700200603      *         - Wrong parameters on call to GLAMADCVT               *
022800200603      *         - Allow defaulting only if called from initial screen *
022900200603      *  237341 - Recompiled due to change in GLAMADVU.               *
023000200603      *  238839 (Reopen) - IBAN field disappears when message RE72026 *
023100200603      *           is displayed because DDIBA1 is blank.  Execute      *
023200200603      *           GLVALID within INVALID tag, do not execute DFT@O    *
023300200603      *           if there are errors.                                *
023400200603      *  238625 - DDICNST is incorrect, initialise field properly     *
023500200603      *  238839 - Pass parameter DDIBAN to GLAMADRTV.                 *
023600200603      *  CSD031 - Enhanced Centralised Static Data (Recompile)        *
023700200603      *  237401 - Recompiled due to change in GLAMADVU                *
023800200603      *  CSD027 - Conversion Of Customer Number to Alpha              *
023900200603      *  BUG10280- Could not Amend record on AMAD                     *
024000200603      *  CER001 - LUX Upgrade to MidasPlus (Recompile only)           *
024100200603      *  CAP086 - Introduce Auto Authorisation to the API's           *
024200200603      *           without it. (Recompile)                             *
024300200603      *  BUG9141 - Only call ValdAcMast if delete (recompile)         *
024400200603      *  BUG8210 - GLC3571 failed due to DBERR in ACCNTBXC (empty)    *
024500200603      *            Need to change condition to read/write on ACCNTBXC *
024600200603      *            simply for all retail accounts. (Recompile)        *
024700200603      *  BUG8104- Reinstate call to AOACODR0 to populate A5ACTY       *
024800200603      *           needed by condition to display. BUG8104 shows an    *
024900200603      *           error message 'Portfolio Reference not valid'.      *
025000200603      *           This occurs when DDPTFR is validated as blank but   *
025100200603      *           not displayed. To prevent TMPFX01 from reoccuring,  *
025200200603      *           do not add message to array as this is also done in *
025300200603      *           GLAMAD1VL in validation GLVPFPO (recompile).        *
025400200603      *  CSW037A- Additional Field extended to 40 chars (recompile)   *
025500200603      *  BUG4615 - Show warning message upon deletion of account      *
025600200603      *            with cheque book details still existing            *
025700200603      *  CSD025 - Customer De-Activation                              *
025800200603      *  CSW037 - Additional Field Data on MT300/MT320                *
025900200603      *  CSW036 - Dual SWIFT BIC held on Client Details               *
026000200603      *  BUG4686- Recompiled due to change in GLAMADVU                *
026100200603      *  BUG4400 - DB error due to invalid timestamp (Recompile)      *
026200200603      *  CRE010 - Retail Account Balance Check (Recompile)            *
026300200603      *  BUG4252 - Make sure files are mapped correctly (RECOMD/      *
026400200603      *            GLVAMCOPD and REAPWDPD/GLVAMPWPD)                  *
026500200603      *  BUG4196- Stopping changes being overwritten by other user    *
026600200603      *           when try to amend the record at the same time.      *
026700200603      *  BUG3068- Recompiled due to change in GLAMADVU module        *
026800200603      *  CLE025 - Credit Lines (Recompile)                            *
026900200603      *  BUG2733 - Recompile over changes to GLAMADVU *module.        *
027000200603      *  BG2557 - Recompiled due to changes in module for CSD012,     *
027100200603      *           Standing Data Authorisation.                        *
027200200603      *  BG2651 - DB error occurs if currency is blank on insert      *
027300200603      *  TDA084 - Recompiled due to changes in module                 *
027400200603      *  BUG553 - Ensure SRDEFT defaulting is for blank fields.       *
027500200603      *         - Set defaults from default RE account if applicable. *
027600200603      *         - Remove changes for BUG545 after fix BUG1271.        *
027700200603      *         - Remove CPY@ array from footer of source.            *
027800200603      *  CSC022 - Commitment Control Changes for MidasPlus            *
027900200603      *           (Recompile)                                         *
028000200603      *  CAP084 - Creation of wrappers for use with front end.        *
028100200603      *                                                               *
028200200603      *****************************************************************
