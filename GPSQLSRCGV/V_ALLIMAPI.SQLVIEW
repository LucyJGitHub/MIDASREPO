/*******************************************************************************/
/*                                                                             */
/*       Midas - Global Processing Module                                      */
/*                                                                             */
/*       T_ALLIMAPI - Authorisation Limits Check Status                        */
/*                                                                             */
/*       (c) Misys International Banking Systems Ltd. 2004                     */
/*                                                                             */
/* Bank Fusion Midas 1.4 Base -------------------------------------------------*/
/* Midas Plus 1.4 Base 04 -----------------------------------------------------*/
/* Midas Plus 1.4 Base --------------------------------------------------------*/
/* Midas Plus 1.3 ---------------- Base ---------------------------------------*/
/*       Last Amend No. CGP009             Date 22Dec04                        */
/*       Last Amend No. CGP001  *CREATE    Date 04Mar04                        */
/*                                                                             */
/*-----------------------------------------------------------------------------*/
/*                                                                             */
/*       CGP009 - Local Zone Time Difference (Recreate)                        */
/*       CGP001 - Global Processing                                            */
/*                                                                             */
/*******************************************************************************/
  CREATE VIEW                                                                   :
  **********/**********                                                         :
   ( ZONE , APINAME , MODULE , DESC , CHECKED , FOMMSN , FOMMIN )               :
   AS SELECT                                                                    :
      DISTINCT APIMOD.*,FOMMSN,FOMMIN FROM (                                    :
      SELECT                                                                    :
         ZOZONE  AS ZONE,                                                       :
         ALAPI   AS APINAME,                                                    :
         APIMOD  AS MODULE,                                                     :
         APIDESC AS DESC,                                                       :
         CASE WHEN ASCHECKED IS NULL THEN 'Y'                                   :
              ELSE ASCHECKED END AS CHECKED                                     :
         FROM T_ALAPI LEFT JOIN T_API ON ALAPI = APINAME                        :
         LEFT JOIN T_ALSYSPD ON ALAPI = ASAPI,                                  :
         GPZONEPD WHERE ASZONE IS NULL                                          :
         UNION ALL                                                              :
         SELECT DISTINCT                                                        :
           ZOZONE AS ZONE,                                                      :
           A.ASAPI AS APINAME,                                                  :
      APIMOD AS MODULE,APIDESC AS DESC,                                         :
  CASE WHEN B.ASCHECKED IS NULL THEN 'Y'                                        :
             ELSE B.ASCHECKED END AS CHECKED                                    :
     FROM GPZONEPD,T_ALSYSPD A                                                  :
     LEFT JOIN T_API ON A.ASAPI = APINAME                                       :
     LEFT JOIN T_ALAPI ON ALAPI = APINAME                                       :
     LEFT JOIN T_ALSYSPD B ON B.ASAPI = A.ASAPI                                 :
                     AND ZOZONE = B.ASZONE) APIMOD,                             :
  GZSDMMIDPD                                                                    :
  WHERE APIMOD.MODULE = GZSDMMIDPD.FOMMSN AND                                   :
        APIMOD.ZONE = FOZONE AND FOMMIN = 'Y' ;                                 :
                                                                                :
 * DESCRIBESTART                                                                :
 * DESCRIBEFIELD ZONE       AS ASZONE     USING T_ALSYSPD                       :
 * DESCRIBEFIELD APINAME    AS ALAPI      USING T_ALAPI                         :
 * DESCRIBEFIELD MODULE     AS APIMOD     USING T_API                           :
 * DESCRIBEFIELD DESC       AS APIDESC    USING T_API                           :
 * DESCRIBEFIELD CHECKED    AS ASCHECKED  USING T_ALSYSPD                       :
 * DESCRIBEEND                                                                  :
 ;                                                                              :
  label on table     **********/**********                                      :
   is 'Midas Authorisation Limits Check Status           ';                     :
                                                                                :
