/*******************************************************************************/
/*                                                                             */
/*       Midas - Global Processing Module                                      */
/*                                                                             */
/*       V_GPPOSNPD - Global Positions View                                    */
/*                                                                             */
/*       (c) Finastra International Limited 2003                               */
/*                                                                             */
/*       Last Amend No. CSD103             Date 10Aug20                        */
/*       Prev Amend No. MD046248           Date 27Oct17                        */
/*                      CRE024A            Date 03Oct12                        */
/* Bank Fusion Midas 1.4 Base -------------------------------------------------*/
/* Midas Plus 1.4 Base 04 -----------------------------------------------------*/
/* Midas Plus 1.4 Base --------------------------------------------------------*/
/* Midas Plus 1.3 ---------------- Base ---------------------------------------*/
/*                      CSD027             Date 10Dec05                        */
/*                      BUG3860            Date 09Aug04                        */
/*                      CGP001  *CREATE    Date 20Aug03                        */
/*                                                                             */
/*-----------------------------------------------------------------------------*/
/*                                                                             */
/*       CSD103 - LIBOR Deregulation - Common Layer/Standing Data              */
/*       MD046248 - Finastra Rebranding                                        */
/*       CRE024A - Security Features for Restricted Accounts Enhancement       */
/*       CSD027 - Conversion Of Customer Number to Alpha                       */
/*       BUG3860 - (recompile)                                                 */
/*       CGP001 - Global Processing                                            */
/*                                                                             */
/*******************************************************************************/
  CREATE VIEW                                                                   :
  **********/**********                                                         :
  AS                                                                            :
   SELECT GPPOSNPD.*,                                                           :
   CASE                                                                         :
   WHEN P_ASLI='L' THEN P_NOML*-1                                               :
   ELSE P_NOML                                                                  :
   END                                                                          :
   AS P_SNOML,                                                                  :
   CASE                                                                         :
   WHEN P_ASLI='L' THEN P_AITD*-1                                               :
   ELSE P_AITD                                                                  :
   END                                                                          :
   AS P_SAITD,                                                                  :
   DATE(P_PDAT+719892) AS FP_PDAT,                                              :
***T_ZONE*AS*CUSTZONE***********************************************************:            CRE024A
   T_ZONE AS CUSTZONE,                                                          :            CRE024A
   T_ACOD,                                                                      :            CRE024A
   T_BRCA                                                                       :            CRE024A
  FROM GPPOSNPD                                                                 :
  LEFT JOIN GPTRAPPD ON T_ID=P_ID;                                              :
                                                                                :
 * DESCRIBESTART                                                                :
 * DESCRIBEFIELD P_SNOML    AS P_NOML     USING GPPOSNPD                        :
 * DESCRIBEFIELD P_SAITD    AS P_AITD     USING GPPOSNPD                        :
 * DESCRIBEFIELD FP_PDAT    AS P_PDAT     USING GPPOSNPD                        :
 * DESCRIBEEND                                                                  :
/*******************************************************************************/
 ;                                                                              :
  label on table     **********/**********                                      :
   is 'Midas GP Global positions view                    ';                     :
                                                                                :
