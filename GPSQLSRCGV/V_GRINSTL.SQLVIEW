/*******************************************************************************/
/*                                                                             */
/*       Midas - Global Processing Module                                      */
/*                                                                             */
/*       V_GRINSTL - Midas GP Instrument Hierarchy Links                       */
/*                                                                             */
/*       (c) Finastra International Limited 2004                               */
/*                                                                             */
/*       Last Amend No. MD046248           Date 27Oct17                        */
/* Bank Fusion Midas 1.4 Base -------------------------------------------------*/
/* Midas Plus 1.4 Base 04 -----------------------------------------------------*/
/* Midas Plus 1.4 Base --------------------------------------------------------*/
/* Midas Plus 1.3 ---------------- Base ---------------------------------------*/
/*       Prev Amend No. BUG2195            Date 13May04                        */
/*                      BUG1217            Date 21Apr04                        */
/*                      CGP001  *CREATE    Date 05Mar04                        */
/*                                                                             */
/*-----------------------------------------------------------------------------*/
/*                                                                             */
/*       MD046248 - Finastra Rebranding                                        */
/*       BUG2195- Calculation Method appearing on 'leaf' description           */
/*       BUG1217- Instrument hierarchy shows codes AND description             */
/*       CGP001 - Global Processing                                            */
/*                                                                             */
/*******************************************************************************/
  CREATE VIEW                                                                   :
  **********/**********                                                         :
  AS                                                                            :
  SELECT                                                                        :
  T_GRINSTL.*,                                                                  :
  CASE WHEN T_GRINSTL.NLINSTCODE IS NOT NULL                                    :
**THEN*TRIM(V_GRINSTI.INDESC)||*'*'*||*TRIM(V_GRINSTI.CMDESC)*******************:            BUG2195
  THEN TRIM(V_GRINSTI.INDESC)                                                   :            BUG2195
**ELSE*V_GRINSTG.NGNAME*********************************************************:BUG1217
  ELSE V_GRINSTI.INDESC                                                         :BUG1217
  END AS NLDESC                                                                 :
  FROM T_GRINSTL LEFT JOIN V_GRINSTI                                            :
  ON T_GRINSTL.NLINSTCODE = V_GRINSTI.NLINSTCODE                                :
**AND*T_GRINSTL.NLCALCMTHD=*V_GRINSTI.NLCALCMTHD********************************:BUG1217
  LEFT JOIN V_GRINSTG ON T_GRINSTL.NLGRPID=V_GRINSTG.NGID;                      :
                                                                                :
  LABEL ON TABLE V_GRINSTL                                                      :BUG1217
   IS 'Midas GP Instrument Hierarchy Links' ;                                   :BUG1217
                                                                                :BUG1217
                                                                                :BUG1217
  LABEL ON COLUMN V_GRINSTL (                                                   :BUG1217
   NLHYID IS 'Hierarchy Id' ,                                                   :BUG1217
   NLID IS 'Link Id' ,                                                          :BUG1217
   NLENDID IS 'End Id' ,                                                        :BUG1217
   NLGRPID IS 'Group Id' ,                                                      :BUG1217
   NLLEVEL IS 'Level' ,                                                         :BUG1217
   NLPARENT IS 'Parent Group' ,                                                 :BUG1217
   NLINSTCODE IS 'Instrument Code' ,                                            :BUG1217
   NLCALCMTHD IS 'Calculation Method' ,                                         :BUG1217
   NLDESC IS 'Instrument'                                                       :BUG1217
   ) ;                                                                          :BUG1217
                                                                                :BUG1217
  LABEL ON COLUMN V_GRINSTL (                                                   :BUG1217
   NLHYID TEXT IS 'Hierarchy Id' ,                                              :BUG1217
   NLID TEXT IS 'Link Id' ,                                                     :BUG1217
   NLENDID TEXT IS 'End Id' ,                                                   :BUG1217
   NLGRPID TEXT IS 'Group Id' ,                                                 :BUG1217
   NLLEVEL TEXT IS 'Level' ,                                                    :BUG1217
   NLPARENT TEXT IS 'Parent Group' ,                                            :BUG1217
   NLINSTCODE TEXT IS 'Instrument Code' ,                                       :BUG1217
   NLCALCMTHD TEXT IS 'Calculation Method' ,                                    :BUG1217
   NLDESC TEXT IS 'Instrument'                                                  :BUG1217
   ) ;                                                                          :BUG1217
/*******************************************************************************/
 ;                                                                              :
  label on table     **********/**********                                      :
   is 'Midas GP Instrument Hierarchy Links               ';                     :
                                                                                :
