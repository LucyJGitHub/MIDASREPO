/*******************************************************************************/
/*                                                                             */
/*       Midas - Global Processing Module                                      */
/*                                                                             */
/*       V_MLLMTEXT - Midas GP Limit WIP List                                  */
/*                                                                             */
/*       (c) Misys International Banking Systems Ltd. 2004                     */
/*                                                                             */
/*       Last Amend No. AR885942           Date 25Jan12                        */
/*       Prev Amend No. CER059             Date 19Jul10                        */
/*                      CAP190             Date 19May08                        */
/* Bank Fusion Midas 1.4 Base -------------------------------------------------*/
/* Midas Plus 1.4 Base 04 -----------------------------------------------------*/
/*                      BG18886            Date 05Jun08                        */
/*                      BUG17953           Date 10Apr08                        */
/* Midas Plus 1.4 Base --------------------------------------------------------*/
/* Midas Plus 1.3 ---------------- Base ---------------------------------------*/
/*                      CAP185             Date 21Apr06                        */
/*                      BUG7304            Date 09Jun05                        */
/*                      CSW037A            Date 02May05                        */
/*                      BUG5033            Date 18Mar05                        */
/*                      CSD025             Date 11Jan05                        */
/*                      BUG5377            Date 16Dec04                        */
/*                      BUG5198            Date 16Dec04                        */
/*                      BUG4521            Date 18Nov04                        */
/*                      BUG3767            Date 25Aug04                        */
/*                      BUG3860            Date 11Aug04                        */
/*                      BUG4001            Date 12Aug04                        */
/*                      BUG2703            Date 01Jul04                        */
/*                      CLE025             Date 20Oct03                        */
/*                      BUG2221            Date 06May04                        */
/*                      BG2225             Date 01Apr04                        */
/*                      BUG1943            Date 29Apr04                        */
/*                      BUG1267_R          Date 20Apr04                        */
/*                      BUG1267            Date 14Apr04                        */
/*                      BUG1623            Date 26Mar04                        */
/*                      CGP001  *CREATE    Date 05Mar04                        */
/*                                                                             */
/*-----------------------------------------------------------------------------*/
/*                                                                             */
/*       AR885942 - Incomplete Entry on the Customer Limits appears more than  */
/*                  once in WIP                                                */
/*       CER059 - German Feature Upgrade to Delhi                              */
/*       CAP190 - Customer Exchange MQ enabling. (recompiled)                  */
/*       BG18886 - Amend non-standard codes. Recompile only.                   */
/*       BUG17953 - CCSID of tables cannot be changed (Recompile)              */
/*       CAP185 - MQ Series Interface (Recompile)                              */
/*       BUG7304 - MSWDATA column data type changed to clob. Recompile.        */
/*       CSW037A- Additional Field extended to 40 chars (recompile)            */
/*       BUG5033- Recompiled over extended T_MSWIP.                            */
/*       CSD025 - Customer De-Activation                                       */
/*       BUG5377 - Views with subqueries fail at V5R3                          */
/*       BUG5198 - Performance Enhancement (Recompile)                         */
/*       BUG4521 - Predeal Check Enhancement (Recompiled)                      */
/*       BUG3767- Add key constraints (recompile)                              */
/*       BUG3860 - (recompile)                                                 */
/*       BUG4001 - Added new field MSWRESID in T_MSWIP (recompile).            */
/*       BUG2703- Additional changes for deletion handling. (Recompile)        */
/*       CLE025 - Credit Lines (Recompile)                                     */
/*       BUG2221- Recompiled due to change in V_MLUTILSR                       */
/*       BG2225 - Increase size of LVXML, add primary key constraint to LVID   */
/*       BUG1943  - Unable to authorise limit                                  */
/*       BUG1267_R - WIP listview contains 'unenhanced data-REOPENED           */
/*       BUG1267- WIP listview contains 'unenhanced data'                      */
/*       BUG1623 - Illegal field names                                         */
/*       CGP001 - Global Processing                                            */
/*                                                                             */
/*******************************************************************************/
  CREATE VIEW                                                                   :
  **********/**********                                                         :
  AS                                                                            :
**SELECT************************************************************************:           AR885942
  SELECT DISTINCT                                                               :           AR885942
  T_MLLMTEXT.LILIMITID,                                                         :BUG1267
    T_MLLMTEXT.LITYPE,                                                          :BUG1267
    LIUTSRTYPE,                                                                 :BUG1267
    CASE                                                                        :BUG1267
     WHEN LIUTSRTYPE=1 THEN 'Customer'                                          :BUG1267
     WHEN LIUTSRTYPE=2 THEN 'Customer Group'                                    :BUG1267
     WHEN LIUTSRTYPE=3 THEN 'Country'                                           :BUG1267
     WHEN LIUTSRTYPE=4 THEN 'Country Group'                                     :BUG1267
     WHEN LIUTSRTYPE=5 THEN 'Industry'                                          :BUG1267
     WHEN LIUTSRTYPE=6 THEN 'Industry Group'                                    :BUG1267
*****WHEN*LIUTSRTYPE=7*THEN*'Adhoc*Customer*Group'******************************:BUG1267BUG1267_R
     WHEN LIUTSRTYPE=7 THEN 'Ad hoc Group'                                      :BUG1267_R
    END AS LIUTSRDSC,                                                           :BUG1267
    LIUTSRCODE,                                                                 :             BG5377
****CASE************************************************************************:BUG1267      BG5377
*****WHEN*LIUTSRTYPE=7*THEN ( SELECT LVNAME FROM T_LVCONFIG WHERE               :BUG1267     BUG1943
*****CAST*LVID*AS*CHAR(10)) = LIUTSRCODE )                                      :BUG1267     BUG1943
*****WHEN*LIUTSRTYPE=7*THEN*(*SELECT*CAST(LVID*AS*CHAR(10))*FROM****************:BUG1943      BG5377
*****T_LVCONFIG*WHERE*CAST(LVID*AS*CHAR(10))*=*LIUTSRCODE*)*********************:BUG1943      BG5377
*****ELSE*LIUTSRCODE************************************************************:BUG1267      BG5377
****END*AS*LIUTSRCODE,**********************************************************:BUG1267      BG5377
    UTSRNAME AS LIUTSRNAME,                                                     :BUG1267
    T_MLLMTEXT.LIENTYTYPE,                                                      :BUG1267
    CASE T_MLLMTEXT.LIENTYTYPE                                                  :BUG1267
     WHEN 1 THEN 'Branch'                                                       :BUG1267
     WHEN 2 THEN 'Branch Group'                                                 :BUG1267
    END AS LIENTYDSC,                                                           :BUG1267
    T_MLLMTEXT.LIENTYCODE,                                                      :BUG1267
    LIINSTGRP,                                                                  :BUG1267
    CASE                                                                        :BUG1267
    WHEN (LITYPE='S'  AND LIINSTGRP IS NULL) THEN 'No Instrument'               :             BG5377
      ELSE NGNAME                                                               :             BG5377
*****WHEN*LITYPE='S'*THEN*'Settlement*Limit'************************************:BUG1267      BG5377
*****ELSE*(*SELECT*NGNAME*FROM*T_GRINSTG*WHERE*LIINSTGRP*=*NGID*)***************:BUG1267      BG5377
    END AS LIINSTGDSC,                                                          :BUG1267
    LITENOR,                                                                    :BUG1267
    CASE                                                                        :BUG1267
     WHEN TFROM = '0' THEN TTO                                                  :BUG1267
     ELSE TFROM                                                                 :BUG1267
    END AS LITENORDSC,                                                          :BUG1267
    T_MLLMTEXT.LIAMT,                                                           :BUG1267
    T_MLLMTEXT.LICCY,                                                           :BUG1267
    T_MLLMTEXT.MSWID,                                                           :BUG1267
    T_MSWIP.MSWSTAT,                                                            :BUG1267
    T_MSWIP.MSWNAVP,                                                            :BUG1267
    T_MSWIP.MSWCAT,                                                             :BUG1267
    T_MSWIP.MSWINPTS,                                                           :BUG1267
    T_MSWIP.MSWINPUSER,                                                         :BUG1267
    T_MSWIP.MSWAPPR,                                                            :BUG1267
    T_MSWIP.MSWAUTH,                                                            :BUG1267
    T_MSWIP.MSWAUTHTS                                                           :BUG1267
  FROM T_MLLMTEXT INNER JOIN T_MSWIP ON T_MLLMTEXT.MSWID = T_MSWIP.MSWID        :             BG5377
**FROM*T_MLLMTEXT*,*T_MSWIP*****************************************************:BUG1267      BG5377
  LEFT JOIN V_MLUTILSR ON LIUTSRTYPE=UTSRTYPE AND LIUTSRCODE=UTSRCODE           :BUG1267
  LEFT JOIN T_MLTENOR ON LITENOR = TID                                          :BUG1267
  LEFT JOIN T_GRINSTG ON LIINSTGRP=NGID                                         :             BG5377
**WHERE*T_MLLMTEXT.MSWID*=*T_MSWIP.MSWID*;**************************************:BUG1267      BG5377
**T_MLLMTEXT.*,*T_MSWIP.MSWSTAT,*T_MSWIP.MSWNAVP,*T_MSWIP.MSWCAT,***************:BUG1267
**T_MSWIP.MSWINPTS,*T_MSWIP.MSWINPUSER,*T_MSWIP.MSWAPPR,*T_MSWIP.MSWAUTH,*******:BUG1267
**T_MSWIP.MSWAUTHTS*************************************************************:BUG1267
**FROM*T_MLLMTEXT,*T_MSWIP******************************************************:BUG1267
**WHERE*T_MLLMTEXT.MSWID*=*T_MSWIP.MSWID;***************************************:BUG1267
                                                                                :
/*******************************************************************************/
 ;                                                                              :
  label on table     **********/**********                                      :
   is 'Midas GP Limit WIP list                           ';                     :
                                                                                :
