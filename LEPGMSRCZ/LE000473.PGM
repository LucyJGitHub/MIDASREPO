      *****************************************************************
/*STD *: PGMBASE                                                    : *
/*EXI *: MODULE(LE000473) ACTGRP(*CALLER)                           : *
/*EXI *  TEXT('Midas LE Past Due Call Loan creation/update')          *
      *****************************************************************
      *                                                               *
      *  Midas - Customer Lending                                     *
      *                                                               *
      *  LE000473 - Past Due Call Loan creation/update                *
      *                                                               *
      *  (c) Finastra International Limited 2011                      *
      *                                                               *
      *    This source is centrally supported and must ONLY be        *
      *    amended by Core Development Personnel                      *
      *                                                               *
      *    /COPY, Client or Country amendments must not be            *
      *    applied to this source.                                    *
      *                                                               *
      *  Last Amend No. MD049745A          Date 16Mar18               *    
      *  Prev Amend No. MD046248           Date 27Oct17               *
      *                 MD049078           Date 12Jan18               *
      *                 MD046080           Date 17Sep17               *      
      *                 MD035433           Date 02Sep15               *
      *                 MD033895           Date 15Apr15               *
      *                 MD031851           Date 25Jan15               *
      *                 MD031225           Date 10Dec14               *
      *                 MD027206           Date 19Aug14               *
      *                 MD025112           Date 11May14               *
      *                 MD023442           Date 05May14               *
      *                 MD023596           Date 30Apr14               *
      *                 MD023203           Date 24Apr14               *
      *                 MD022807I          Date 24Apr14               *
      *                 MD023162           Date 23Apr14               *
      *                 MD022807H          Date 22Apr14               *
      *                 MD022807E          Date 16Oct13               *
      *                 MD022807C          Date 14Oct13               *
      *                 MD022807B          Date 14Oct13               *
      *                 MD022807A          Date 11Oct13               *
      *                 MD022807           Date 11Oct13               *
      *                 MD022640           Date 01Oct13               *
      *                 MD022465           Date 24Sep13               *
      *                 MD021423E          Date 12Sep13               *
      *                 MD021423D          Date 10Sep13               *
      *                 MD021423B          Date 04Sep13               *
      *                 MD021423A          Date 03Sep13               *
      *                 MD021423           Date 21Aug13               *
      *                 MD020954           Date 02Aug13               *
      *                 MD021476           Date 30Jul13               *
      *                 MD021018           Date 27Jun13               *
      *                 MD020966           Date 20Jun13               *
      *                 MD020343           Date 18May13               *
      *                 MD020534           Date 23May13               *
      *                 MD020209           Date 14May13               *
      *                 MD020095           Date 02May13               *
      *                 AR827807           Date 13Apr13               *
      *                 AR1095331          Date 07Apr13               *
      *                 MD019829           Date 04Apr13               *
      *                 AR1097132          Date 23Mar13               *
      *                 AR1095652          Date 12Mar13               *
      *                 AR1093780          Date 05Mar13               *
      *                 AR1094241          Date 03Mar13               *
      *                 AR1091136          Date 26Feb13               *
      *                 AR1077063          Date 23Jan13               *
      *                 AR1076968A         Date 07Feb13               *
      *                 AR1085742          Date 06Jan13               *
      *                 AR1086749          Date 12Feb13               *
      *                 AR796443           Date 15Jan13               *
      *                 AR1080660          Date 26Jan13               *
      *                 AR1075853          Date 08Jan13               *
      *                 AR1073390          Date 30Dec12               *
      *                 AR1073095          Date 27Dec12               *
      *                 AR1061940          Date 28Nov12               *
      *                 AR1055539          Date 12Nov12               *
      *                 AR798695           Date 09Nov12               *
      *                 AR1021983          Date 01Aug12               *
      *                 AR706513           Date 05Jul12               *
      *                 CLE148             Date 05Dec11               *
      *                 AR719589           Date 01Aug12               *
      *                 AR705750           Date 01Aug12               *
      *                 AR571209           Date 14Mar11               *
      *                 AR551942           Date 14Mar11               *
      *                 AR549587           Date 14Mar11               *
      *                 AR467421           Date 14Mar11               *
      *                 AR467031           Date 14Mar11               *
      *                 AR375982           Date 14Mar11               *
      *                 AR323561           Date 14Mar11               *
      *                 AR322561           Date 14Mar11               *
      *                 AR322571           Date 14Mar11               *
      *                 AR214141           Date 14Mar11               *
      *                 263840             Date 14Mar11               *
      *                 263628             Date 14Mar11               *
      *                 263228             Date 14Mar11               *
      *                 263074             Date 14Mar11               *
      *                 CLE134  *CREATE    Date 14Mar11               *
      *                                                               *
      *---------------------------------------------------------------*
      *                                                               *
      *  MD049745A - Corruption of Original currency of Loans and     *
      *              PDCLs incorrect postings (Recompile)             *   
      *  MD046248 - Finastra Rebranding                               *
      *  MD049078 - Wrong postings of MR and RE of PDCL               *
      *             loan (Recompile)                                  *
      *  MD046080 - Gap between CLE031 (Settlement to different       *
      *             currency) and CLE134 (PDCL processing)            *      
      *  MD035433 - System generated new PDCL instead of using old    *
      *             one (Recompile).                                  *
      *  MD033895 - Password retrieval issue on LEC000456 during COB  *
      *             (Recompile)                                       *
      *  MD031851 - Unable to generate PDCL Y if the PDCL has no base *
      *             rate code. (Recompile)                            *
      *  MD031225 - Unable to generate loan as fixed rate and spread  *
      *             has same value. Make sure FXRT will be populated  *
      *             from RTSP only when BRTT and BASR equal to zero.  *
      *             (Recompile)                                       *
      *  MD027206 - LEC000456 00001 failed in BB (88-96 patch)        *
      *             (Recompile)                                       *
      *  MD025112 - Incorrect LASQ field of PDCL loan fees in         *
      *             CLOANCL file (Recompile)                          *
      *  MD023442 - ORBR field is blank for Facility Fee PDCLs        *
      *             (Recompile)                                       *
      *  MD023596 - Enhance MD022807A. Don't ignore HISTSHQ so that   *
      *             BC and SC will be counted. (Recompile)            *
      *  MD023203 - Update LEPDCL data area (Recompile)               *
      *  MD022807I - Wrong PDCL reference in LEMQLGPD for CLIP        *
      *              (Recompile)                                      *
      *  MD023162 - Generation of event date is not correct when      *
      *             the event date falls on a holiday (Recompile)     *
      *  MD022807H - Value date of PDCL and PI should be defaulted    *
      *              from the value date of the transaction           *
      *              (Recompile)                                      *
      *  MD022807E - Record went to repair queue due to deal/start    *
      *              date error                                       *
      *            - Use VDAT instead of RUNDAT to chain LOAMS and    *
      *              HISTSHP to get the latest sequnce number.        *
      *            - Incorrect PDCL Fee reference for PI event        *
      *              (Recompile)                                      *
      *  MD022807C - Default pay settlement of the PDCL's Principal   *
      *              Increase into '00'. (Recompile)                  *
      *  MD022807B - Use *IN79 instead of *IN99. (Recompile)          *
      *            - Default loan number. (Recompile)                 *
      *            - Default PDCL pay settlement from the original    *
      *              loan. (Recompile)                                *
      *  MD022807A - History records must also be check for next      *
      *              sequence number. (Recompile)                     *
      *  MD022807 -  Settlement details of LOAM should be coming      *
      *              from PDCL loans and not from OL. (Recompile)     *
      *  MD022640 -  Recompile due to the changes below.              *
      *           -  ROBN ROCN RIBN RIBA must be blank if RSTM is not *
      *              01 07 or 08                                      *
      *           -  RELI amd BMDI not setup correctly                *
      *           -  NAR1 incorrect for FeeLoan                       *
      *           -  RIBN incorrect for FeeLoan                       *
      *           -  RIBA incorrect for FeeLoan                       *
      *           -  ROBN incorrect for FeeLoan                       *
      *           -  ROCN incorrect for FeeLoan                       *
      *           -  POBN POCN PIBN PIBA must be blank if PSTM is not *
      *              01 07 or 08                                      *
      *           - ORBR  not populated for PDCL created for fee      *
      *           - CLE134: Wrong book in ZZ PDCL. Populate fee loan  *
      *              book code with book code of loan from PF/CLOANCL.*
      *             (Recompile)                                       *
      *  MD022465 - Matured loans should not generate SC/BC events    *
      *             (Recompile)                                       *
      *  MD021423E - Deal date should be the deal date of the OL      *
      *              Pay instruction should be defaulted from receipt *
      *              instruction of the OL                            *
      *             (Recompile)                                       *
      *  MD021423D - Abnormally long run of PDCL/MAPY processing      *
      *              Error in LASQ field (Recompile)                  *
      *  MD021423B - Abnormally long run of PDCL/MAPY processing      *
      *              Need to pass 'AUTH' field block (Recompile)      *
      *  MD021423A- Abnormally long run of PDCL/MAPY processing       *
      *             components (Reopen)                               *
      *  MD021423 - Abnormally long run of PDCL/MAPY processing       *
      *             components                                        *
      *  MD020954 - Missing projection for new PDCL. Update on CLOANE *
      *             must be done in LECLIPUPD (Recompile).            *
      *  MD021476 - PDCL was started from wrong account due to        *
      *             incorrect account key generated (Recompile)       *
      *  MD021018 - PDCL Loan amendments went to repair queue due     *
      *             due to same sequence number (Recompile)           *
      *  MD020966 - Payments for Past due loans are posted twice      *
      *             (Recompile)                                       *
      *  MD020343 - Erroneous original loan reference in report       *
      *             (Recompile)                                       *
      *  MD020534 - System did not generate PDCL for the unpaid       *
      *             balance of interest after COB (Recompile)         *
      *  MD020209 - LEPDUEPD with discrepancy in number of records.   *
      *             Duplicate header (RECI = 'p') generated in        *
      *             LEPDUEPD.                                         *
      *             (Recompile)                                       *
      *  MD020095  - LEC000138 Component failed (Recompile)           *
      *  AR827807 - Loan Fee PDCL does not default sequence number    *
      *             from Facility. SFDC00572444 (Child: AR827808)     *
      *             (Recompile)                                       *
      *  AR1095331 - BFTC Security Issues (Recompile)                 *
      *  MD019829  - LEC000138 and LEC000456 cannot run               *
      *              simultaneously due to locking issue (Recompile)  *
      *  AR1097132 - LEC000456 00001 failed due to record locks       *
      *              (Recompile)                                      *
      *  AR1095652 - Amount is incorrect - PDCL transaction sent      *
      *              to repair queue                                  *
      *  AR1093780 - LOAM-DDPONX - Invalid settlement branch entered  *
      *              (Recompile)                                      *
      *  AR1094241 - LOAM-DDCURR - Currency entered must be the       *
      *              same as the Loan Currency (Recompile)            *
      *  AR1091136 - After drop2 MQ processing now requires password  *
      *              as part of the message authentication (Recompile)*
      *  AR1077063 - Encountered FOOB in LEC06A seq 04001 (Recompile) *
      *  AR1076968A - System did not generate PDCL fees for unpaid    *
      *               portion of Fee due (Recompile)                  *
      *  AR1085742 - Recovery handling when PDP components loop due   *
      *              to database connection issues (Recompile)        *
      *  AR1086749 - Database Error on SDLOANPD due to missing Loan   *
      *              Type Subtype in SDFEEPD. (Recompile)             *
      *  AR796443 - Recompiled due to changes in LE000473 module.     *
      *             (Child: AR796444)                                 *
      *  AR1080660 - Erroneous generated result with PDCL details     *
      *              (Recompile)                                      *
      *  AR1075853 - APCTRANR does not allow transactions from being  *
      *              processed during COB (Recompile)                 *
      *  AR1073390 - Amount being sent to Java for PDCL creation is   *
      *              invalid for when there are partial payment       *
      *              (Recompile)                                      *
      *  AR1073095 - LELWNEPD is being updated by LEC000131 causing   *
      *              a decimal data error                             *
      *  AR1061940 - LEC06A component failed during clean COB         *
      *              (Recompile)                                      *
      *  AR1055539 - Various errors encountered in COB during         *
      *              Link Test (Recompile)                            *
      *  AR798695 - Performance issue on LEC0456.                     *
      *             - remove setting ON of *INLR upon return          *
      *             - externalise *entry and keyfields from *INZSR    *
      *             (Child: AR798696)                                 *
      *  AR1021983 - Option C - Technical Enhancements Stated in POC  *
      *  AR706513 - Branch not populated for PDCL created for fee for *
      *             settlement 05. Corrected mapping of fields.       *
      *             Added fix for base rate change indicator.         *
      *             (Child: AR719825)                                 *
      *  CLE148 - Alpha Loan Reference                                *
      *  AR719589 - Wrong base rate change indicator for PDCL (fee).  *
      *             Fix is to use the correct variable AUBSRI from    *
      *             SDFEEPD. (Child: AR719590)                        *
      *  AR705750 - Use FCXR and FMDI of origin loan for PDCL for     *
      *             loan. (Child: AR705927)                           *
      *  AR571209 - Drawn amount on the Facility History plus         *
      *             calculated fee                                    *
      *             When Separate indicator = 'N' and Capitalized     *
      *             indicator = 'N', ignore past due interest         *
      *             Child: AR571217 (Recompile)                       *
      *  AR551942 - Impossible to reactivate Penalty default          *
      *             rate after deletion                               *
      *             Recompile over changes to LEPRATL1.               *
      *             Child: AR551943                                   *
      *  AR549587 - An error during Default Penalty Rate changing     *
      *             Amend AR467032 so blanks on LEPRATPD are used     *
      *             after all for Base Rate/Spread fields             *
      *             Child: AR549657 (Recompile)                       *
      *  AR467421 - Base Rate Change Error (Unexpected storno for     *
      *             PDCL for Interest                                 *
      *             SPIN must not be blank even if RTSP & BRTE are 0. *
      *             Child: AR467422 (Recompile)                       *
      *  AR467031 - Wrong Outstanding Interest amount for PDCL after  *
      *             Default Penalty Rate was changed                  *
      *             Default of field ICBS must depend on Loan type    *
      *             Child: AR467032 (Recompile)                       *
      *  AR375982 - Unexpected amount on the PD-SUSPENSE account (1972*
      *             Wrong Principal for a Loan fee PDCL               *
      *             Child: AR375983 (Recompile)                       *
      *  AR323561 - Wrong Loan Number Range for PDCL                  *
      *             Use Interest PDCL Loan Type/Sub Type to retrieve  *
      *             Interest PDCL Loan Number Range.                  *
      *             Child: AR323562 (Recompile)                       *
      *  AR322561 - Back valued Repayment schedule event for PDCL     *
      *             booking                                           *
      *             Child: AR322562 (Recompile)                       *
      *  AR322571 - Wrong PDCL account seq no                         *
      *             Take LASQ from Original Loan for PDCL             *
      *             Child: AR322572 (Recompile)                       *
      *  AR214141 - LE0457 was crashing in our Past due test system   *
      *             Amend BIC array to increase size to 999           *
      *             Child: AR214147 (Recompile)                       *
      *  263840 - Correct update of facility utilisation for PDCLs    *
      *  263628 - Incorrect returned value for PDCL interest and      *
      *           principal (Recompile)                               *
      *  263228 - Incorrect interest rate value (Recompile)           *
      *  263074 - Wrong Postings (Recompile)                          *
      *           CLE134 / SWIFT                                      *
      *  CLE134 - Past Due Call Loan Processing                       *
      *         - CC03: Generation of Past Due Call Loans for Fees    *
      *                                                               *
      *****************************************************************
