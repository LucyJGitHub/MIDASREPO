/*******************************************************************************/
/*                                                                             */
/*       Midas - Message Management Module                                     */
/*                                                                             */
/*       V_MXAPI - Midas MX API Enquiry                                        */
/*                                                                             */
/*       (c) Finastra International Limited 2021                               */
/*                                                                             */
/*       Last Amend No. MD060246           Date 21Jul22                        */
/*       Prev Amend No. MD060262           Date 19Jul22                        */
/*                      CSW122 *CREATE   Date 04Oct21                          */
/*-----------------------------------------------------------------------------*/
/*                                                                             */
/*       MD060246 - Increase field length value for MX Element Value           */
/*                  changed from 120A to 500A. (Recompile)                     */   
/*       MD060262 - Remove Group Header/Message ID as filter for FT Transaction*/
/*       CSW122 - SWIFT ISO 20022                                              */
/*                                                                             */
/*******************************************************************************/
                                                                                :
  CREATE VIEW                                                                   :
  **********/**********                                                         :
  AS                                                                            :
  SELECT                                                                        :
  MEISODPD.MEMSGR AS MEMSGR,                                                    :
  MEISODPD.MEMSID AS MEMSID,                                                    :
  MEISODPD.MEUETR AS MEUETR,                                                    :
  MEISODPD.MESEQN AS MESEQN,                                                    :
  CASE WHEN MEDESCPD.DEDESC                                                     :
  IS NULL                                                                       :
  OR MEDESCPD.DEDESC = ''                                                       :
  THEN                                                                          :
  MEENAM                                                                        :
  ELSE                                                                          :
  MEDESCPD.DEDESC END AS MEENAM,                                                :
  MEISODPD.MEEVAL AS MEEVAL,                                                    :
  CASE WHEN V_FTPREF.PREF                                                       :
  IS NULL                                                                       :
  OR V_FTPREF.PREF = ''                                                         :
  THEN                                                                          :
  ''                                                                            :
  ELSE                                                                          :
  V_FTPREF.PREF END AS MEPREF                                                   :
  FROM                                                                          :
  MEISODPD MEISODPD                                                             :
  LEFT JOIN V_FTPREF V_FTPREF                                                   :
/*ON*MEISODPD.MEUETR*=*V_FTPREF.UETR*AND*MEISODPD.MEMSID*=*V_FTPREF.MSGID*******:           MD060262
  ON MEISODPD.MEUETR = V_FTPREF.UETR                                            :           MD060262
  LEFT JOIN MEDESCPD MEDESCPD                                                   :
  ON MEISODPD.MEENAM = MEDESCPD.DEENAM                                          :
/*******************************************************************************/
 ;                                                                              :
  label on table     **********/**********                                      :
   is 'Midas MX API Enquiry                              ';                     :
                                                                                :
