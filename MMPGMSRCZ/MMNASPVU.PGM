      *****************************************************************
/*STD *  PGMBASE                                                      *
/*EXI *  MODULE(MMNASPVU) ACTGRP(*CALLER)                             *
/*EXI *  TEXT('Midas MM NAs purchased validate and update')           *
      *****************************************************************
      *                                                               *
      *  Midas  - Money Market                                        *
      *                                                               *
      *  MMNASPVU - MM NAs Purchased validate and update              *
      *                                                               *
      *  Function: This program validates NAs purchased details for   *
      *            input into the Midas database.                     *
      *            The action code determines which processes are     *
      *            executed as follows:                               *
      *            - For I (=Insert) or A (=Amend)                    *
      *              - Validate the transaction details fields        *
      *            - For A (=AMEND),                                  *
      *              - if transaction is a partial amendment, call a  *
      *                separate function to complete the transaction  *
      *                details.                                       *
      *              - if transaction is valid, call a separate       *
      *                function to check whether it is a valid        *
      *                amendment.                                     *
      *            - For D (=DELETE), call a separate function to     *
      *              process the transaction and bypass the rest of   *
      *              the validation.                                  *
      *                                                               *
      *            For all action codes, the decision to as to        *
      *            whether to write to the valid or invalid file and  *
      *            the call to the message handler will take place    *
      *            in this module                                     *
      *                                                               *
      *  (c) Misys International Banking Systems Ltd. 2003            *
      *                                                               *
      *  Last Amend No. CDL094             Date 11Jun14               *
      *  Prev Amend No. CSD095             Date 08Apr14               *
      *                 CLE134             Date 01Aug12               *
      *                 CSF011A            Date 28Nov11               *
      *                 259924A            Date 31May09               *
      * Bank Fusion Midas 1.4 Base -----------------------------------*
      *                 254420             Date 20May08               *
      * Midas Plus 1.4 Base 04 ---------------------------------------*
      * Midas Plus 1.4 Base ------------------------------------------*
      * Midas Plus 1.3 ----------- Base ------------------------------*
      *                 239400             Date 26Jun06               *
      *                 CDL049             Date 11Jul06               *
      *                 CSD027             Date 09Dec05               *
      *                 BUG9711            Date 26Jan06               *
      *                 CER001             Date 25Apr05               *
      *                 CLE031             Date 26Apr05               *
      *                 CDL038             Date 10May05               *
      *                 CAP086             Date 08Jun05               *
      *                 BUG8119            Date 20Oct05               *
      *                 BUG6512            Date 13May05               *
      *                 BUG4808            Date 16Nov04               *
      *                 BUG4728            Date 05Nov04               *
      *                 BUG3992            Date 01Oct04               *
      *                 BUG4482            Date 29Sep04               *
      *                 BUG4146            Date 31Aug04               *
      *                 BG3948             Date 05Aug04               *
      *                 BUG629             Date 19Jul04               *
      *                 CDL018             Date 03Feb04               *
      *                 TCA090             Date 02Apr04               *
      *                 NAD002             Date 26Mar04               *
      *                 CSC022             Date 24Feb04               *
      *                 CAP084  *CREATE    Date 25Jun03               *
      *                                                               *
      *---------------------------------------------------------------*
      *                                                               *
      *  CDL094 - Enhance Receive Settlement Instructions             *
      *           (Recompile)                                         *
      *  CSD095 - Allow Deal Sub-Type and Branch for MM and FX SSIs   *
      *           (Recompile)                                         *
      *  CLE134 - Past Due Call Loan Processing (Recompile)           *
      *  CSF011A - CCR015: Display Order in Confirmation Pages        *
      *            (Recompile)                                        *
      *  259924A- Recompiled due to changes done in MOD/MMNASPVU.     *
      *  254420 - Validate value date against the back value period   *
      *           defined in PF/SDBANKPD (Recompile)                  *
      *  239400 - Add Front Office ID to be used by SOAP Interface    *
      *  CDL049 - Addition of a Reference Rate field (recompile)      *
      *  CSD027 - Conversion Of Customer Number to Alpha              *
      *  BUG9711- Changes to MMVNASPPD/MMVNASSPD (re-compile)         *
      *  CER001 - LUX Upgrade to MidasPlus                            *
      *  CLE031 - Lending Enhancements - Settlement Currency Recompile*
      *  CDL038 - Extended Deal Sub Type (Recompile)                  *
      *  CAP086 - Introduce Auto Authorisation to the API's           *
      *           without it. (Recompile)                             *
      *  BUG8119 - Fields returned incorrectly from API if update     *
      *            flag set to 'Y' but data is invalid.               *
      *  BUG6512 - Retrieve TRAM details                              *
      *  BUG4808 - Unable to authorise transaction because WIP do     *
      *            not have correct Timestamp.                        *
      *  BUG4728 - Serious Midas error with blank timestamp when      *
      *            authorising insert of transaction.                 *
      *  BUG3992- Call new program MMNASPVLP to perform post          *
      *           settlement detail validation. Revalidate dates.     *
      *  BUG4482- Authorise should call Validate to show all the      *
      *           warning errors.                                     *
      *  BUG4146 - Stopping two users to update the same record at the*
      *            same time.                                         *
      *  BG3948 - Error msgs in Settlement details.                   *
      *  BUG629 - Display Deal Status on EDIT and ACTION mode.        *
      *           (Recompile)                                         *
      *  CDL018 - Multiple Settlement Accounts on Loans/Deposits      *
      *           (Recompile)                                         *
      *  TCA090 - Retrieve Pgms should NOT run in front-office mode.  *
      *           (Also call SETUPDEALN at correct time)              *
      *  NAD002 - 10-Digit Account Code Errors                        *
      *  CSC022 - Commitment Control Changes for MidasPlus            *
      *           (Recompile)                                         *
      *  CAP084 - API Wrapper project                                 *
      *                                                               *
      *****************************************************************
