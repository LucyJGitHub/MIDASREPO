     H        1
      *****************************************************************
/*STD *  RPGBASE                                                      *
/*EXI *  TEXT('Midas RR Set-up PF/JRNFIL for FF recovery')
      *****************************************************************
      *                                                               *
      *  Midas - Restart Recovery Module                              *
      *                                                               *
      *  RR1730 - Place a list of files for journal changes           *
      *           recovery into PF/JRNFIL.                            *
      *                                                               *
      *  (c) Misys International Banking Systems Ltd. 2001            *
      *                                                               *
      * Bank Fusion Midas 1.4 Base -----------------------------------*
      * Midas Plus 1.4 Base 04 ---------------------------------------*
      * Midas Plus 1.4 Base ------------------------------------------*
      * Midas Plus 1.3 ----------- Base ------------------------------*
      * Midas Release 4 --------------- Base -------------------------*
      * Midas DBA 3.00 ---------------- Base -------------------------*
      *  LAST AMEND NO. S01345             DATE 24OCT91               *
      *                                                               *
      *---------------------------------------------------------------*
      *                                                               *
      *  S01345 - Midas journalling system re-write.                  *
      *                                                               *
      *****************************************************************
      *  C R E A T I O N     P A R A M E T E R S                      *
      *                                                               *
      *****************************************************************
     FRRJRNPD IF  E           K        DISK
     FJRNFIL  O   E                    DISK
      *
     E                    FILA       25  9
     E                    FILB       25  9
      *
      ** Array containing Copyright statement.
      *
     E                    CPY@    1   1 80
      *
      ** Set up copyright parameter.
      *
     C                     MOVEACPY@      BIS@   80
      *
      ** READ IN ALL RRJRNPD RECORDS AND IF ONE OF THE MODULES
      ** SPECIFIED ON THE RECORD IS 01 THEN IT IS A SINGLE MEMBERED
      ** FF FILE AND SHOULD BE ADDED TO JRNFIL FOR RECOVERY.
      *
     C                     Z-ADD1         X       20
     C                     READ RRJRND0                  80
      *
     C           *IN80     DOUEQ'1'
      *
     C           FILE      IFNE LAST
     C                     MOVELFILE      LAST   10
      *
     C           MOD       IFNE '01'
     C           MOD1      ANDNE'01'
     C           MOD2      ANDNE'01'
     C           MOD3      ANDNE'01'
     C           MOD4      ANDNE'01'
     C           MOD5      ANDNE'01'
     C           MOD6      ANDNE'01'
     C           MOD7      ANDNE'01'
     C           MOD8      ANDNE'01'
     C           MOD9      ANDNE'01'
     C  N81                MOVELFILE      FILA,X
     C   81                MOVELFILE      FILB,X
     C                     ADD  1         X
     C           X         IFEQ 26
     C           *IN81     IFEQ '1'
     C                     SETOF                     81
     C                     MOVEAFILA      FILEA
     C                     MOVEAFILB      FILEB
     C                     WRITEJRNFILF
     C                     MOVE *BLANKS   FILEA
     C                     MOVE *BLANKS   FILEB
     C                     MOVE *BLANKS   FILA
     C                     MOVE *BLANKS   FILB
     C                     ELSE
     C                     SETON                     81
     C                     END
     C                     Z-ADD1         X
     C                     END
     C                     END
      *
     C                     END
      *
     C                     READ RRJRND0                  80
      *
     C                     END
      *
     C           FILA,1    IFNE *BLANKS
     C                     MOVEAFILA      FILEA
     C                     MOVEAFILB      FILEB
     C                     WRITEJRNFILF
     C                     END
      *
     C                     SETON                     LR
     C                     RETRN
      *
**  CPY@
(c) Misys International Banking Systems Ltd. 2001
