/*********************************************************************/
/*STD    CLPBASEBND                                                  */
/*EXI    TEXT('Midas SD ARR Calculator Batch Job')                   */
/*********************************************************************/

             PGM



             COPYRIGHT  TEXT('(c) Finastra International Limited +
                          2020')

             CHGJOB     SWS(0XXXXXXX)                                                   /*MD060020*/
                                                                                        /*MD060020*/
/** Global monitor message */

             MONMSG     MSGID(CPF0000 MCH0000 RPG0000) EXEC(GOTO +
                          CMDLBL(ERROR))

             SNDPGMMSG  MSG('SDC000999 - Clear Files') TOMSGQ(MRUNQ)

/** Start commitment control */

             STRCMTCTL  LCKLVL(*CHG) NFYOBJ(MNTYF (*FILE)) +
                          CMTSCOPE(*JOB)
             MONMSG     MSGID(CPF8351)

/** Retrieve Midas phase */


             CLRPFM     FILE(SDHSDRTD)
             CLRPFM     FILE(SDARRLOGTD)
             CLRPFM     FILE(LELIBEPD)
             CLRPFM     FILE(DLLIBEPD)
             CLRPFM     FILE(IRLIBEPD)
             CLRPFM     FILE(SDFWDRTD)
             CLRPFM     FILE(SDRTKNTD)
             CLRPFM     FILE(LEFWBRPD)


/** Abnormal termination */
ABNOR:
             ROLLBACK
             MONMSG     MSGID(CPF0000 MCH0000)
             CHGJOB     SWS(XXXXXX11)
             SNDPGMMSG  MSGID(CPF9898) MSGF(QCPFMSG) MSGDTA('Program SDC000999 +
                          ended abnormally - see job log') TOMSGQ(MOPERQ MRUNQ)
             MONMSG     MSGID(CPF0000 MCH0000)

END:
             ENDCMTCTL
             MONMSG     MSGID(CPF0000)
             ENDPGM
