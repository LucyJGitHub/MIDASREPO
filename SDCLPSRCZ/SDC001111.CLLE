000100201124/*********************************************************************/
000101201124/*STD    CLPBASEBND                                                  */
000102201124/*EXI    TEXT('TAKE-ON - Initialise CSD103 Fields')                  */
000103201124/*********************************************************************/
000104201124/*                                                                   */
000105201124/*       Midas -  Customer Lending Module                            */
000106201124/*                                                                   */
000107201124/*       SDC001111 - Initialise CSD103 Fields (Take-on only)         */
000108201124/*                                                                   */
000109201124/*       (c) Finastra International Limited 2020                     */
000110201124/*                                                                   */
000111201124/*       Last Amend No. CSD103    *CREATE  Date 10Aug20              */
000112201124/*                                                                   */
000113201124/*-------------------------------------------------------------------*/
000114201124/*                                                                   */
000115201124/*       CSD103 - LIBOR Deregulation - Common Layer/Standing Data    */
000116201124/*                                                                   */
000117201124/*********************************************************************/
000118201124
000119201124             PGM        PARM(&RTCDE &PMODE)
000120201124
000121201124             DCL        VAR(&PMODE)   TYPE(*CHAR) LEN(1)
000122201124             DCL        VAR(&RTCDE)   TYPE(*CHAR) LEN(7)
000123201124             DCL        VAR(&CPYFLD)  TYPE(*CHAR) LEN(64) VALUE('(c) Finastra International +
000124201124                          Limited 2020')
000125201124
000126201124/** Initialisation */
000127201124
000128201124             CHGJOB     SWS(00000000)
000129201124
000130201124             CRTDTAARA  DTAARA(QTEMP/LDA) TYPE(*CHAR) LEN(256)
000131201124             MONMSG     MSGID(CPF1023)
000132201124
000133201124/** Main Processing Control */
000134201124
000135201124             IF         COND(&PMODE *NE '1') THEN(GOTO ENDPGM)
000136201124
000137201124             SNDPGMMSG  MSG('CSD103 New Field Initialisation') TOMSGQ(MRUNQ)
000138201124
000139201124/** Initialise New Fields on SDBSRTPD */
000140201124
000141201124 TAG0010:
000142201124             CALL       PGM(SD001111)
000143201124             MONMSG     MSGID(CPF0000) EXEC(GOTO ERR_PGM)
000144201124
000145201124             IF         COND(%SWITCH(XXXXXX1X)) THEN(GOTO ERR_DIE)
000146201124
000147201124/** Program Completed Successfully */
000148201124
000149201124             GOTO       CMDLBL(ENDPGM)
000150201124
000151201124/** Process Errors */
000152201124
000153201124 ERR_DIE:
000154201124             SNDPGMMSG  MSG('Job terminated, database in error.') TOMSGQ(MOPERQ MRUNQ)
000156201124             CHGVAR     VAR(&RTCDE) VALUE('*ERROR')
000157201124
000158201124             GOTO       CMDLBL(ENDPGM)
000159201124
000160201124 ERR_OOB:
000161201124             SNDPGMMSG  MSG('Job terminated, file out of balance.') TOMSGQ(MOPERQ MRUNQ)
000163201124             CHGVAR     VAR(&RTCDE) VALUE('*ERROR')
000164201124
000165201124             GOTO       CMDLBL(ENDPGM)
000166201124
000167201124 ERR_PGM:
000168201124             SNDPGMMSG  MSG('Job terminated due to program error.') TOMSGQ(MOPERQ MRUNQ)
000170201124             CHGVAR     VAR(&RTCDE) VALUE('*ERROR')
000171201124
000172201124             GOTO       CMDLBL(ENDPGM)
000173201124
000174201124/** Termination Process */
000175201124
000176201124 ENDPGM:
000177201124             DLTOVR     FILE(*ALL)
000178201124             MONMSG     MSGID(CPF0000)
000179201124
000180201124             CHGVAR     VAR(&CPYFLD) VALUE('(c) Finastra International Limited')
000182201124             ENDPGM
