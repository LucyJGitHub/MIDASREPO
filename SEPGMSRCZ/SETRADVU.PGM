      *****************************************************************
/*STD *  PGMBASE                                                      *
/*EXI *  MODULE(SETRADVU) ACTGRP(*CALLER)                             *
/*EXI *  TEXT('Midas SE Securities trades validate and update')       *
      *****************************************************************
      *                                                               *
      *  Midas - Securities Trading Module                            *
      *                                                               *
      *  SETRADVU - SE Securities Details validate and update         *
      *                                                               *
      *  Function: This program validates fee settlements for input   *
      *            into the Midas database.                           *
      *            The action code determines which processes are     *
      *            executed as follows:                               *
      *            - For I (=Insert) or A (=Amend)                    *
      *              - Validate the transaction details fields        *
      *            - For A (=AMEND),                                  *
      *              - if transaction is a partial amendment, call a  *
      *                separate function to complete the transaction  *
      *                details.                                       *
      *              - if transaction is valid, call a separate       *
      *                function to check whether it is a valid        *
      *                amendment.                                     *
      *            - For D (=DELETE), call a separate function to     *
      *              process the transaction and bypass the rest of   *
      *              the validation.                                  *
      *                                                               *
      *            For all action codes, the decision to as to        *
      *            whether to write to the valid or invalid file and  *
      *            the call to the message handler will take place    *
      *            in this module                                     *
      *                                                               *
      *  (c) Finastra International Limited 2003                      *
      *                                                               *
      *  Last Amend No. MD046248           Date 27Oct17               *
      *  Prev Amend No. MD035243           Date 29Jul15               *
      *                 AR596191           Date 19Aug14               *
      *                 AR971184A          Date 13Jun12               *
      *                 AR971184           Date 28May12               *
      *                 CSF011A            Date 28Nov11               *
      *                 CSF011             Date 12Sep11               *
      *                 CER049             Date 06Dec10               *
      *                 AR698195B          Date 20Jan11               *
      *                 AR639840           Date 09Sep10               *
      *                 AR638989           Date 08Sep10               *
      *                 AR589197           Date 11Aug10               *
      *                 CSW210             Date 04May10               *
      *                 CER059             Date 19Jul10               *
      *                 CER054             Date 07Apr09               *
      *                 BUG22911           Date 17Feb09               *
      *                 CER048             Date 19May08               *
      *                 BUG27876           Date 06Jul10               *
      * Bank Fusion Midas 1.4 Base -----------------------------------*
      * Midas Plus 1.4 Base 04 ---------------------------------------*
      *                 BUG22232           Date 16Jan09               *
      *                 256564             Date 17Sep08               *
      *                 BUG21092           Date 23Sep08               *
      *                 BUG18525           Date 07May08               *
      *                 249422             Date 28Jul07               *
      *                 247873             Date 15Jun07               *
      *                 247868             Date 30May07               *
      *                 247796             Date 23May07               *
      *                 247451             Date 16May07               *
      *                 246736             Date 28Mar07               *
      *                 BUG14806A          Date 14Sep07               *
      *                 BUG14514           Date 02Aug07               *
      * Midas Plus 1.4 Base ------------------------------------------*
      *                 245542             Date 11Feb07               *
      *                 244537             Date 17Aug05               *
      * Midas Plus 1.3 ----------- Base ------------------------------*
      *                 BUG12874           Date 12Dec06               *
      *                 BUG12579           Date 21Nov06               *
      *                 CSW206E            Date 24Aug06               *
      *                 BUG11622           Date 27Jun06               *
      *                 BUG8690R (Reopen)  Date 09Jun06               *
      *                 238825 (Reopen)    Date 06Jun06               *
      *                 CSD031             Date 10Apr06               *
      *                 238825             Date 21Apr06               *
      *                 238859             Date 21Apr06               *
      *                 BUG11213           Date 18Apr06               *
      *                 BUG11529           Date 22Jun06               *
      *                 CSD027             Date 09Dec05               *
      *                 BUG11197           Date 25Apr06               *
      *                 BUG11194           Date 24Apr06               *
      *                 BUG10476           Date 15Feb06               *
      *                 BUG10534           Date 10Feb06               *
      *                 BUG9467            Date 02Dec06               *
      *                 BUG9142            Date 01Nov05               *
      *                 BUG10085           Date 15Mar06               *
      *                 BUG10041           Date 08Feb06               *
      *                 BUG10202           Date 29Jan06               *
      *                 BUG10021           Date 23Jan05               *
      *                 BUG9961            Date 19Jan06               *
      *                 BUG9917            Date 17Jan06               *
      *                 BUG8953            Date 07Nov05               *
      *                 CAP087             Date 17Aug05               *
      *                 BUG9089            Date 25Apr05               *
      *                 CER001             Date 25Apr05               *
      *                 CSE075             Date 17Nov05               *
      *                 BUG8087            Date 03Aug05               *
      *                 BUG8039            Date 02Aug05               *
      *                 BUG8690            Date 14Nov05               *
      *                 BUG8119            Date 20Oct05               *
      *                 BUG7029            Date 09Jun05               *
      *                 CSD027             Date 09Dec05               *
      *                 CSE065             Date 08Nov04               *
      *                 CSE071             Date 19Jul05               *
      *                 BUG6496            Date 24Apr05               *
      *                 BUG5557            Date 26Jan05               *
      *                 CGL031             Date 05Jul04               *
      *                 BUG5230            Date 14Dec04               *
      *                 BUG4728            Date 05Nov04               *
      *                 BUG4482            Date 29Sep04               *
      *                 BUG4070            Date 24Aug04               *
      *                 BUG2274            Date 19Aug04               *
      *                 BUG3950            Date 10Aug04               *
      *                 BUG3122            Date 17Jul04               *
      *                 BUG3145            Date 15Jun04               *
      *                 MLFIX1             Date 26May04               *
      *                 CLE025             Date 20Oct03               *
      *                 TDA035             Date 02Apr04               *
      *                 CSC022             Date 24Feb03               *
      *                 BUG1569            Date 17Mar04               *
      *                 225421 (BUG1356)   Date 04Mar03               *
      *                 CGL029             Date 01Sep03               *
      *                 CAS006             Date 02Oct03               *
      *                 CAP084  *CREATE    Date 07Sep03               *
      *                                                               *
      *---------------------------------------------------------------*
      *                                                               *
      *  MD046248 - Finastra Rebranding                               *
      *  MD035243 - Error message for Account with Institution        *
      *             Account is not properly displayed (Recompile)     *
      *  AR596191 - Error on Safekeeping Account is issued even if    *
      *             a valid value is inserted (Recompile)             *
      *  AR971184A - Additional Coding. Front Ofc Id should not be    *
      *              equal to blanks when calling RTV (Recompile)     *
      *           - Applied fix for AR989192 (Child:AR989193)         *
      *           - During Amend Front Ofc Id must be updated with the*
      *             new one                                           *
      *  AR971184 - For some JMS APIs (CUSD, AMAD, DPMV, OPAY), Front *
      *             Office Id is no more updated in master database   *
      *             files which provokes some big problems in third   *
      *             party product such as TOF.(Child:AR971185)        *
      *             (Recompile)                                       *
      *  CSF011A - CCR015: Display Order in Confirmation Pages        *
      *            (Recompile)                                        *
      *  CSF011 - Customer Name on Inputs (Recompile)                 *
      *  CER049 - Stamp Tax (Recompile)                               *
      *  AR698195B - Recompiled due to changes in module SETRADVU.    *
      *             (Child: AR698196)                                 *
      *  AR639840 - Safekeeping Account is being blanked-out          *
      *             (Recompile)                                       *
      *  AR638989 - Beneficiary of Money account should be            *
      *             highlighted in blue (Recompile)                   *
      *  AR589197 - The input validation of //xx has been removed if  *
      *             ISO15022 is switched on, it should be reapplied   *
      *             as the code is still used  (Recompile)            *
      *  CSW210 - SWIFT 2010 Changes (Recompile)                      *
      *  CER059 - German Feature Upgrade to Delhi                     *
      *  CER054 - German Features - Church Tax (Recompile)            *
      *  BUG22911 - Changes for Correct Tax Calculation (Recompile)   *
      *  CER048 - German Features - Taxes (Recompile)                 *
      *  BUG27876 - Serious midas error upon clicking settlement      *
      *             tab (Recompile)                                   *
      *  BUG22232 - Missing authorization field in repository.        *
      *  256564 - Recompile due to PF changes done by fix 256330      *
      *  BUG21092 - Missing SWIFT Identifier in Destination of        *
      *             Confirmation field. (Recompile)                   *
      *  BUG18525 - Recompile over changes in module SETRADVU.        *
      *  249422 - Recompile over changes in module SETRADVU.          *
      *  247873 - Recompile over changes in module SETRADVU.          *
      *  247868 - Recompile over changes in module SETRADVU.          *
      *  247796 - Decimal data error. Recompile.                      *
      *  247451 - Pass Customer Number not Shortname to SETSESDFT and *
      *           SEDORFRTV to prevent dumps later.                   *
      *  246736 - Recompile due to change in module.                  *
      *  BUG14806A - Recompile Program due to Decimal Error           *
      *  BUG14514 - serious midas error on trade authorisation        *
      *  245542 - Recompiled due to changes in SETRADVU *MODULE.      *
      *  244537 - To avoid overriding front office identifier.        *
      *  BUG12874 - Recompiled due to changes in SETRADVU module      *
      *  BUG12579 - Recompiled due to bug fix.                        *
      *  CSW206E - Change Control for SWIFT 2006 Standard Changes     *
      *  BUG11622-Customer number not being setup correctly caused    *
      *           DB error in AOSECSR0.                               *
      *  BUG8690R - Countervalue not updated and Multiply/Divide      *
      *             indicator entered by user overridden (Recompile)  *
      *  238825 - (Reopen) Recompiled due to changed module SETRADVU. *
      *  CSD031 - Enhanced Centralised Static Data (Recompile)        *
      *  238825 - Recompiled due to changed module SETRADVU.          *
      *  238859 - Recompiled due to changed module SETRADVU.          *
      *  BUG11213- Defaulting of other details should be done only    *
      *            during first time of processing flow. Applied      *
      *            fixes BUG8690, BUG9917 and BUG10021 annotated by   *
      *            the same corresponding bug references.             *
      *  BUG11529 - Error in defaulting Settlement Details            *
      *  CSD027 - Conversion Of Customer Number to Alpha              *
      *  BUG11197- Settlement Ex-rate and M/D indicator should        *
      *            default when ccy changes. (Recompile)              *
      *  BUG11194 - SEFRN- Purchased Interest not recalculated when   *
      *             trade value date is changed (Recompile)           *
      *  BUG10476- Market Centre defaulting.                          *
      *          - Place of settlement defaulting.                    *
      *  BUG10534- Reverse out fix for BUG8690                        *
      *  BUG9467 - Parameter mismatch in call to ZDYYR                *
      *  BUG9142 - do not need to wait until no error find before     *
      *            calculate trade value and days in a year.          *
      *  BUG10085- Safekeeping Account not defaulted                  *
      *  BUG10041 - Checking of Security name should be done for      *
      *             delete. (Recompile)                               *
      *  BUG10202- Mapping error in TRAD                              *
      *  BUG10021- Exchange rate and M/D indicator not defaulting.    *
      *  BUG9961- Parameter mismatch for ZDYYR due to changes made    *
      *           by CSE071 and CAP087.(Recompile)                    *
      *  BUG9917 - Include the Deliver From and Deliver To Field      *
      *            in checking before passing thru the default values,*
      *            this in conjunction with BUG8690.(Recompile)       *
      *  BUG8953 - Recompile                                          *
      *  CAP087  - Allow the processing of buy/Sell back trades.      *
      *  BUG9089- Mapping error with Java for DPMV                    *
      *  CER001 - LUX Upgrade to MidasPlus                            *
      *  CSE075 - US Enhanced Treasury Upgrade to MidasPlus           *
      *           (Recompile)                                         *
      *  BUG8087 - Recompiled due to change in SETRADVU module        *
      *  BUG8039 - Recompile due to change in SEVTCUST                *
      *  BUG8690 - Recompiled due to change in SETRADVU module        *
      *  BUG8119 - Fields returned incorrectly from API if update     *
      *            flag set to 'Y' but data is invalid.               *
      *  BUG7029 - Ensure ZMUSER is re-checked on every call,         *
      *            move out of *INZSR.                                *
      *  CSD027 - Conversion Of Customer Number to Alpha              *
      *  CSE065 - Const. Yield Amort. on Mortgage backed assets       *
      *           (Recompile)                                         *
      *  CSE071 - Multiple Holidays Re Securities (recompile)         *
      *  BUG6496 - Missing CAS006 fields in Securities and Trades     *
      *            Maintenance.                                       *
      *  BUG5557 - Information for TRADSDX2 are being dropped during  *
      *            insert. (Recompile)                                *
      *  CGL031 - Taxation of Savings Income                          *
      *  BUG5230 - Ensure output to buffer show what is on Midas      *
      *            data base. (Recompile)                             *
      *  BUG4728 - Serious Midas error with blank timestamp when      *
      *            authorising insert of transaction.                 *
      *  BUG4482 - Authorise should call Validate to show all the     *
      *            warning errors.                                    *
      *  BUG4070 - Countervalue and nominal currency code not being   *
      *            passed to API for deletion of trades.              *
      *  BUG2274 - Unable to access SSI information because market    *
      *            not being passed in.                               *
      *  BUG3950 - Stop validation if there is error on Security      *
      *            and counterparty.                                  *
      *  BUG3122 - Recompiled due to changes in SETRADVU module.      *
      *  BUG3145 - Charges and Commission are being missed out of the *
      *            calculation of countervalue.                       *
      *  MLFIX1 - Add investment type to output message for           *
      *           management limit.                                   *
      *  CLE025 - Credit Lines (Recompile)                            *
      *  TDA035 - RTS Signon changes for MidasPlus. (Recompile)       *
      *  CSC022 - Commitment Control Changes for MidasPlus            *
      *           (Recompile)                                         *
      *  BUG1569- Stopping user updating the same record at the same  *
      *           time.                                               *
      *  225421 - Recomplie over change in SETRADVU module            *
      *  CGL029 - Increase Account Code to 10 digits                  *
      *  CAS006 - Hedge Accounting Phase B                            *
      *  CAP084 - API Wrapper project                                 *
      *                                                               *
      *****************************************************************
