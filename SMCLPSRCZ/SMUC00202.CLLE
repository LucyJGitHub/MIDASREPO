000001220823/*********************************************************************/
000002220823/*STD    CLPBASEBND                                                  */
000003220823/*EXI    TEXT('Midas SM Update SDFACTPD  CL 3')                      */
000004220823/*********************************************************************/
000005220823/*                                                                   */
000006220823/*       Midas - Implementation module                               */
000007220823/*                                                                   */
000008220823/*       SMUC00202 - Midas SM Update SDFACTPD  CL 3                  */
000009220823/*                                                                   */
000010220823/*       (c) Finastra International Limited 2022                     */
000011220823/*                                                                   */
000012220823/*       Last Amend No. MD060092 *CREATE   Date 01Aug22              */
000013220823/*                                                                   */
000014220823/*********************************************************************/
000015220823/*                                                                   */
000016220823/*          MD060092 - Revert CLE138 changes in SDFACTPD, AOFACTR0   */
000017220823/*                     and SD Facility Type Maintenance. Apply       */
000018220823/*                     CLE138 design of SDFACTX0 to store            */
/*                     facility classes                              */
/*                                                                   */
/*********************************************************************/
             PGM        PARM(&PARM)

             DCL        VAR(&PARM) TYPE(*CHAR) LEN(06)
             DCL        VAR(&SDSTAT) TYPE(*CHAR) LEN(256)
             DCL        VAR(&ZONEID) TYPE(*CHAR) LEN(2)
             DCL        VAR(&TMPLIB) TYPE(*CHAR) LEN(10) VALUE('#.')

             COPYRIGHT  TEXT('(c) Finastra International Limited 2022')

 /* Global monitor message */
             MONMSG     MSGID(CPF0000 MCH0000 RPG0000) EXEC(GOTO +
                            CMDLBL(ERROR))

             CHGJOB     SWS(XXXXXX00)

             RTVDTAARA  DTAARA(SDSTAT) RTNVAR(&SDSTAT)
             CHGVAR     VAR(&ZONEID) VALUE(%SUBSTRING(&SDSTAT 6 2))
             CHGVAR     VAR(&TMPLIB) VALUE(&TMPLIB *TCAT &ZONEID)
             CHGVAR     VAR(&TMPLIB) VALUE(&TMPLIB *TCAT 'DMLIB')

             DLTF       FILE(QTEMP/SMFACTF3)
             MONMSG     MSGID(CPF2105)

             CPYF       FROMFILE(&TMPLIB/SMFACTF3) TOFILE(QTEMP/SMFACTF3) +
                          MBROPT(*REPLACE) CRTFILE(*YES)

/* Call program to perform migration. */

             CALL       PGM(SMU00202)  PARM(&PARM)

             IF         COND(%SWITCH(XXXXXX11)) THEN(DO)
                GOTO       CMDLBL(ERROR)
             ENDDO

             GOTO       CMDLBL(ENDPGM)

 ERROR:
             CHGJOB     SWS(XXXXXX11)

 ENDPGM:
             ENDPGM
