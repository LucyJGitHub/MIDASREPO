/*********************************************************************/
/*STD    CLPBASEBND                                                  */
/*EXI    TEXT('Midas SM Add MMPTRMPD record to SMZNMGPD')            */
/*********************************************************************/
/*                                                                   */
/*       Midas - Implementation module                               */
/*                                                                   */
/*       SMUC00290 - Add MMPTRMPD record to SMZNMGPD                 */
/*                                                                   */
/*       (c) Finastra International Limited 2013                     */
/*                                                                   */
/*       Last Amend No. MD058089           Date 01Sep21              */
/*       Prev Amend No. MD046248           Date 27Oct17              */
/*                      A1084804 *CREATE   Date 28Jan13              */
/*                      XXXXXX             Date DDMmmYY              */
/*                                                                   */
/*********************************************************************/
/*                                                                   */
/*       MD058089 - Deliverable Data Split for SM  and UP            */
/*       MD046248 - Finastra Rebranding                              */
/*       A1084804 - Add MMPTRMPD record to SMZNMGPD.                 */
/*                                                                   */
/*********************************************************************/
             PGM

             DCL        VAR(&STM_STR) TYPE(*CHAR) LEN(80)

             COPYRIGHT TEXT('(c) Finastra International Limited +
                            2011')

/* Global monitor message. */
             MONMSG     MSGID(CPF0000 MCH0000 RPG0000) EXEC(GOTO +
                            CMDLBL(ERROR))

             CHGJOB     SWS(XXXXXX00)

/* Try to remove record first. */
/*********   CHGVAR     VAR(&STM_STR) VALUE('delete from SMZNMGPD +
                          where ZNOBJ = ''MMPTRMPD''') */                                /*MD05089*/
             CHGVAR     VAR(&STM_STR) VALUE('delete from SMZNMCTD +
                          where ZNOBJ = ''MMPTRMPD''')                                   /*MD05089*/
             CALL       PGM(UTWRTSQL) PARM(&STM_STR '*CLEAR')
             RUNSQLSTM  SRCFILE(QTEMP/RUNSQL) SRCMBR(RUNSQLSTM) +
                          COMMIT(*NONE)
             MONMSG     MSGID(SQL9010)
             CHGVAR     VAR(&STM_STR) VALUE('delete from SMZNMXTD +
                          where ZNOBJ = ''MMPTRMPD''')                                   /*MD05089*/
             CALL       PGM(UTWRTSQL) PARM(&STM_STR '*CLEAR')                            /*MD05089*/
             RUNSQLSTM  SRCFILE(QTEMP/RUNSQL) SRCMBR(RUNSQLSTM) +
                          COMMIT(*NONE)                                                  /*MD05089*/
             MONMSG     MSGID(SQL9010)                                                   /*MD05089*/

/* Now try to add record. */
/*********   CHGVAR     VAR(&STM_STR) VALUE('insert into SMZNMGPD +
                          (ZNOBJ, ZNTYPE) values(''MMPTRMPD'', +
                          ''*FILE'')') */                                                /*MD05089*/
             CHGVAR     VAR(&STM_STR) VALUE('insert into SMZNMCTD +
                          (ZNOBJ, ZNTYPE, ZNMODE) values(''MMPTRMPD'', +
                          ''*FILE'',''C'')')                                             /*MD05089*/
             CALL       PGM(UTWRTSQL) PARM(&STM_STR '*CLEAR')
             RUNSQLSTM  SRCFILE(QTEMP/RUNSQL) SRCMBR(RUNSQLSTM) +
                          COMMIT(*NONE)
             MONMSG     MSGID(SQL9010)
             CHGVAR     VAR(&STM_STR) VALUE('insert into SMZNMXTD +
                          (ZNOBJ, ZNTYPE, ZNMODE) values(''MMPTRMPD'', +
                          ''*FILE'',''C'')')                                             /*MD05089*/
             CALL       PGM(UTWRTSQL) PARM(&STM_STR '*CLEAR')                            /*MD05089*/
             RUNSQLSTM  SRCFILE(QTEMP/RUNSQL) SRCMBR(RUNSQLSTM) +
                          COMMIT(*NONE)                                                  /*MD05089*/
             MONMSG     MSGID(SQL9010)                                                   /*MD05089*/

             GOTO       CMDLBL(ENDPGM)

 ERROR:
             CHGJOB     SWS(XXXXXX11)

 ENDPGM:
             ENDPGM
