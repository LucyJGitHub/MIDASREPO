/*********************************************************************/
/*STD    CLPBASEBND                                                  */
/*EXI    TEXT('Midas SM Correct feature description')                */
/*********************************************************************/
/*                                                                   */
/*       Midas - Implementation Module                               */
/*                                                                   */
/*       SMUC00481 - Midas SM Correct feature description            */
/*                                                                   */
/*       (c) Finastra International Limited 2021                     */
/*                                                                   */
/*       Last Amend No. MD059037 *CREATE   Date 13Oct21              */
/*                                                                   */
/*********************************************************************/
/*                                                                   */
/*       MD059037 - Retired features should not be available for     */
/*                  selection                                        */
/*                                                                   */
/*********************************************************************/
             PGM

             COPYRIGHT  TEXT('(C) Finastra International Limited 2021')

/* Global Monitor Message                                           */

             MONMSG     MSGID(CPF0000 RPG0000 MCH0000) +
                           EXEC(GOTO ABNORMAL)

/* Set Switches                                                     */

             CHGJOB     SWS(XXXXX000)

/* Main Process                                                     */

             RUNSQL     SQL('UPDATE SCSRDBTD a SET a.SARD = (select b.AXSARD +
                          from SCSRSCTD b where a.sarn = b.axsarn)    +
                          where exists (select * from SCSRSCTD b where a.sarn = b.axsarn )') +
                          COMMIT(*NC)
             MONMSG     MSGID(CPF0000 RPG0000 MCH0000)

             RUNSQL     SQL('UPDATE SCSRDCTD a SET a.SARD = (select b.AXSARD +
                          from SCSRSCTD b where a.sarn = b.axsarn)    +
                          where exists (select * from SCSRSCTD b where a.sarn = b.axsarn )') +
                          COMMIT(*NC)
             MONMSG     MSGID(CPF0000 RPG0000 MCH0000)

             GOTO       CMDLBL(ENDCLPGM)

/* Abnormal termination processing                                  */

ABNORMAL:
             CHGJOB     SWS(XXXXXX11)
             DMPCLPGM

             SNDPGMMSG  MSG('Program SMUC00481 ended abnormally') TOMSGQ(MOPERQ +
                          MRUNQ)
             MONMSG     MSGID(CPF0000 RPG0000 MCH0000)

ENDCLPGM:
             ENDPGM
